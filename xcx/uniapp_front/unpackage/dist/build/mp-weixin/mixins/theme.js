"use strict";const r=require("../common/vendor.js"),e=require("../store/theme.js");const o={isValidColor:r=>/^#[0-9A-Fa-f]{6}$/.test(r),getColorBrightness(r){const e=r.replace("#","");return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3},isDarkColor(r){return this.getColorBrightness(r)<128},getContrastColor(r){return this.isDarkColor(r)?"#FFFFFF":"#000000"},addAlpha:(r,e)=>`#${r.replace("#","")}${Math.round(255*e).toString(16).padStart(2,"0")}`};exports.themeUtils=o,exports.useTheme=function(){const o=e.useThemeStore(),a=r.computed((()=>o.currentTheme)),t=r.computed((()=>o.cssVariables)),l=r.computed((()=>({"--theme-primary":a.value.primaryColor,"--theme-secondary":a.value.secondaryColor,"--theme-background":a.value.backgroundColor,"--theme-primary-light":a.value.primaryColor+"20","--theme-secondary-light":a.value.secondaryColor+"20"})));let n=null;return r.onMounted((()=>{n=r=>{console.log("主题已更新:",r)},r.index.$on("themeChanged",n),o.initialized||o.initTheme()})),r.onUnmounted((()=>{n&&r.index.$off("themeChanged",n)})),{currentTheme:a,themeVars:t,themeStyles:l,getThemeColor:(r="primary")=>{switch(r){case"primary":default:return a.value.primaryColor;case"secondary":return a.value.secondaryColor;case"background":return a.value.backgroundColor}},getGradientStyle:(r="135deg")=>({background:`linear-gradient(${r}, ${a.value.primaryColor}, ${a.value.secondaryColor})`}),getButtonStyle:(r="primary")=>{const e={borderRadius:"40rpx",border:"none",fontWeight:"bold"};switch(r){case"primary":return{...e,background:`linear-gradient(135deg, ${a.value.primaryColor}, ${a.value.secondaryColor})`,color:"white",boxShadow:`0 8rpx 25rpx ${a.value.primaryColor}40`};case"secondary":return{...e,background:a.value.backgroundColor,color:a.value.primaryColor,border:`2rpx solid ${a.value.primaryColor}`};case"outline":return{...e,background:"transparent",color:a.value.primaryColor,border:`2rpx solid ${a.value.primaryColor}`};default:return e}},getCardStyle:()=>({background:"white",borderRadius:"20rpx",boxShadow:"0 4rpx 20rpx rgba(0, 0, 0, 0.08)",border:`1rpx solid ${a.value.backgroundColor}`}),getHeaderStyle:()=>({background:`linear-gradient(135deg, ${a.value.primaryColor}, ${a.value.secondaryColor})`,color:"white"}),getPriceStyle:(r="medium")=>({color:a.value.primaryColor,fontWeight:"bold",...{small:{fontSize:"24rpx"},medium:{fontSize:"28rpx"},large:{fontSize:"36rpx"}}[r]}),getBadgeStyle:(r="primary")=>{const e={borderRadius:"20rpx",padding:"4rpx 8rpx",fontSize:"20rpx",color:"white",fontWeight:"bold"};switch(r){case"primary":return{...e,background:a.value.primaryColor};case"secondary":return{...e,background:a.value.secondaryColor};case"count":return{...e,background:a.value.primaryColor,minWidth:"32rpx",textAlign:"center"};default:return e}},getTabStyle:(r=!1)=>r?{color:a.value.primaryColor,fontWeight:"bold",borderBottom:`4rpx solid ${a.value.primaryColor}`}:{color:"#666",fontWeight:"normal"},applyPresetTheme:o.applyPresetTheme,updateThemeColor:o.updateThemeColor,saveThemeToServer:o.saveThemeToServer,resetToDefault:o.resetToDefault}};
