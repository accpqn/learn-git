{"version":3,"file":"index.js","sources":["config/index.js"],"sourcesContent":["// 应用配置文件\n//\n// 使用说明：\n// 1. 开发时使用 development 配置\n// 2. 测试时修改 CURRENT_ENV 为 'testing'\n// 3. 生产部署时修改 CURRENT_ENV 为 'production' 并更新生产环境的URL\n// 4. 所有图片和API请求都会自动使用对应环境的配置\n\n// 开发环境配置\nconst development = {\n    // API基础URL - 优先使用环境变量\n    API_BASE_URL: import.meta.env.VITE_API_BASE_URL || 'http://127.0.0.1:8000',\n    // 媒体文件基础URL - 优先使用环境变量\n    MEDIA_BASE_URL: import.meta.env.VITE_API_BASE_URL || 'http://127.0.0.1:8000',\n    // 是否开启调试模式\n    DEBUG: true,\n    // 请求超时时间（毫秒）\n    REQUEST_TIMEOUT: 10000,\n    // 应用名称\n    APP_NAME: import.meta.env.VITE_APP_TITLE || '情侣点餐系统'\n};\n\n// 生产环境配置\nconst production = {\n    // API基础URL - 优先使用环境变量\n    API_BASE_URL: import.meta.env.VITE_API_BASE_URL || 'https://xcx.euans.xyz',\n    // 媒体文件基础URL - 优先使用环境变量\n    MEDIA_BASE_URL: import.meta.env.VITE_API_BASE_URL || 'https://xcx.euans.xyz',\n    // 关闭调试模式\n    DEBUG: false,\n    // 生产环境请求超时时间\n    REQUEST_TIMEOUT: 15000,\n    // 应用名称\n    APP_NAME: import.meta.env.VITE_APP_TITLE || '情侣点餐系统'\n};\n\n// 测试环境配置\nconst testing = {\n    API_BASE_URL: 'https://test-api.your-domain.com',\n    MEDIA_BASE_URL: 'https://test-cdn.your-domain.com',\n    DEBUG: true,\n    REQUEST_TIMEOUT: 12000,\n    APP_NAME: '情侣点餐系统(测试版)'\n};\n\n// 环境配置选择\n// 自动检测环境，也可以手动指定：'development' | 'testing' | 'production'\nconst getEnvironment = () => {\n    // 优先使用环境变量\n    if (import.meta.env.VITE_APP_ENV) {\n        return import.meta.env.VITE_APP_ENV;\n    }\n\n    // 根据NODE_ENV自动判断\n    if (process.env.NODE_ENV === 'production') {\n        return 'production';\n    }\n\n    // 默认开发环境\n    return 'development';\n};\n\nconst CURRENT_ENV = getEnvironment();\n\nconst getConfig = () => {\n    console.log(`当前环境: ${CURRENT_ENV}`);\n\n    switch (CURRENT_ENV) {\n        case 'production':\n            return production;\n        case 'testing':\n            return testing;\n        default:\n            return development;\n    }\n};\n\n// 导出当前环境的配置\nconst config = getConfig();\n\n// 辅助函数：获取完整的API URL\nexport const getApiUrl = (path) => {\n    return `${config.API_BASE_URL}/api${path}`;\n};\n\n// 辅助函数：获取完整的媒体文件URL\nexport const getMediaUrl = (path) => {\n    if (!path) return '';\n    \n    // 如果已经是完整URL，直接返回\n    if (path.startsWith('http')) {\n        return path;\n    }\n    \n    // 拼接媒体文件基础URL\n    return `${config.MEDIA_BASE_URL}${path}`;\n};\n\n// 辅助函数：获取商品图片URL\nexport const getProductImageUrl = (product) => {\n    // 优先使用image字段（上传的图片），然后是image_url字段（外链图片）\n    const imageField = product?.image;\n    const imageUrlField = product?.image_url;\n    \n    // 如果有上传的图片文件\n    if (imageField) {\n        return getMediaUrl(imageField);\n    }\n    \n    // 如果有外链图片URL\n    if (imageUrlField) {\n        return imageUrlField;\n    }\n    \n    // 都没有则返回默认占位图\n    return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjRkY2OUI0Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyMCIgZmlsbD0iI0ZGRiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuaaguaXoOWbvueJhzwvdGV4dD48L3N2Zz4=';\n};\n\n// 导出配置对象\nexport default config;\n"],"names":["uni"],"mappings":";;AASA,MAAM,cAAc;AAAA;AAAA,EAEhB,cAAc;AAAA;AAAA,EAEd,gBAAgB;AAAA;AAAA,EAEhB,OAAO;AAAA;AAAA,EAEP,iBAAiB;AAAA;AAAA,EAEjB,UAAU;AACd;AAGA,MAAM,aAAa;AAAA;AAAA,EAEf,cAAc;AAAA;AAAA,EAEd,gBAAgB;AAAA;AAAA,EAEhB,OAAO;AAAA;AAAA,EAEP,iBAAiB;AAAA;AAAA,EAEjB,UAAU;AACd;AAGA,MAAM,UAAU;AAAA,EACZ,cAAc;AAAA,EACd,gBAAgB;AAAA,EAChB,OAAO;AAAA,EACP,iBAAiB;AAAA,EACjB,UAAU;AACd;AAIA,MAAM,iBAAiB,MAAM;AAES;AACvB,WAAA;AAAA,EACX;AASJ;AAEA,MAAM,cAAc,eAAe;AAEnC,MAAM,YAAY,MAAM;AACpBA,gBAAA,MAAY,MAAA,OAAA,yBAAA,SAAS,WAAW,EAAE;AAElC,UAAQ,aAAa;AAAA,IACjB,KAAK;AACM,aAAA;AAAA,IACX,KAAK;AACM,aAAA;AAAA,IACX;AACW,aAAA;AAAA,EACf;AACJ;AAGA,MAAM,SAAS,UAAU;AAGZ,MAAA,YAAY,CAAC,SAAS;AAC/B,SAAO,GAAG,OAAO,YAAY,OAAO,IAAI;AAC5C;AAGa,MAAA,cAAc,CAAC,SAAS;AACjC,MAAI,CAAC;AAAa,WAAA;AAGd,MAAA,KAAK,WAAW,MAAM,GAAG;AAClB,WAAA;AAAA,EACX;AAGA,SAAO,GAAG,OAAO,cAAc,GAAG,IAAI;AAC1C;AAGa,MAAA,qBAAqB,CAAC,YAAY;AAE3C,QAAM,aAAa,mCAAS;AAC5B,QAAM,gBAAgB,mCAAS;AAG/B,MAAI,YAAY;AACZ,WAAO,YAAY,UAAU;AAAA,EACjC;AAGA,MAAI,eAAe;AACR,WAAA;AAAA,EACX;AAGO,SAAA;AACX;;;;"}