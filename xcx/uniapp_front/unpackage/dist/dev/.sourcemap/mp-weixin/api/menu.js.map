{"version":3,"file":"menu.js","sources":["api/menu.js"],"sourcesContent":["import request from './request';\r\n\r\n// ==================== 分类管理 API ====================\r\n\r\n// 获取当前用户的所有分类\r\nexport function getCategories() {\r\n    return request({\r\n        url: '/menus/categories/',\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\n// 创建新分类\r\nexport function addCategory(data) {\r\n    return request({\r\n        url: '/menus/categories/',\r\n        method: 'POST',\r\n        data\r\n    });\r\n}\r\n\r\n// 获取单个分类详情\r\nexport function getCategoryDetail(id) {\r\n    return request({\r\n        url: `/menus/categories/${id}/`,\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\n// 更新分类（完整更新）\r\nexport function updateCategory(id, data) {\r\n    return request({\r\n        url: `/menus/categories/${id}/`,\r\n        method: 'PUT',\r\n        data\r\n    });\r\n}\r\n\r\n// 更新分类（部分更新）\r\nexport function patchCategory(id, data) {\r\n    return request({\r\n        url: `/menus/categories/${id}/`,\r\n        method: 'PATCH',\r\n        data\r\n    });\r\n}\r\n\r\n// 删除分类（注意：会删除该分类下的所有商品）\r\nexport function deleteCategory(id) {\r\n    return request({\r\n        url: `/menus/categories/${id}/`,\r\n        method: 'DELETE'\r\n    });\r\n}\r\n\r\n// ==================== 商品管理 API ====================\r\n\r\n// 获取当前用户的所有商品\r\nexport function getProducts() {\r\n    return request({\r\n        url: '/menus/products/',\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\n// 创建新商品\r\nexport function addProduct(data) {\r\n    const isFormData = data instanceof FormData;\r\n    return request({\r\n        url: '/menus/products/',\r\n        method: 'POST',\r\n        data,\r\n        header: isFormData ? {\r\n            'Content-Type': 'multipart/form-data'\r\n        } : undefined\r\n    });\r\n}\r\n\r\n// 获取单个商品详情\r\nexport function getProductDetail(id) {\r\n    return request({\r\n        url: `/menus/products/${id}/`,\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\n// 更新商品（完整更新）\r\nexport function updateProduct(id, data) {\r\n    const isFormData = data instanceof FormData;\r\n    return request({\r\n        url: `/menus/products/${id}/`,\r\n        method: 'PUT',\r\n        data,\r\n        header: isFormData ? {\r\n            'Content-Type': 'multipart/form-data'\r\n        } : undefined\r\n    });\r\n}\r\n\r\n// 更新商品（部分更新）\r\nexport function patchProduct(id, data) {\r\n    return request({\r\n        url: `/menus/products/${id}/`,\r\n        method: 'PATCH',\r\n        data\r\n    });\r\n}\r\n\r\n// 删除商品\r\nexport function deleteProduct(id) {\r\n    return request({\r\n        url: `/menus/products/${id}/`,\r\n        method: 'DELETE'\r\n    });\r\n}\r\n\r\n// ==================== 兼容性和辅助方法 ====================\r\n\r\n// 根据分类获取商品（从所有商品中筛选）\r\nexport async function getProductsByCategory(categoryId) {\r\n    try {\r\n        const products = await getProducts();\r\n        return products.filter(product => product.category === categoryId);\r\n    } catch (error) {\r\n        console.error('获取分类商品失败:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// 获取所有商品（兼容旧版本）\r\nexport const getAllProducts = getProducts;"],"names":["request"],"mappings":";;;AAKO,SAAS,gBAAgB;AAC5B,SAAOA,oBAAQ;AAAA,IACX,KAAK;AAAA,IACL,QAAQ;AAAA,EAChB,CAAK;AACL;AAGO,SAAS,YAAY,MAAM;AAC9B,SAAOA,oBAAQ;AAAA,IACX,KAAK;AAAA,IACL,QAAQ;AAAA,IACR;AAAA,EACR,CAAK;AACL;AAWO,SAAS,eAAe,IAAI,MAAM;AACrC,SAAOA,oBAAQ;AAAA,IACX,KAAK,qBAAqB,EAAE;AAAA,IAC5B,QAAQ;AAAA,IACR;AAAA,EACR,CAAK;AACL;AAYO,SAAS,eAAe,IAAI;AAC/B,SAAOA,oBAAQ;AAAA,IACX,KAAK,qBAAqB,EAAE;AAAA,IAC5B,QAAQ;AAAA,EAChB,CAAK;AACL;AAKO,SAAS,cAAc;AAC1B,SAAOA,oBAAQ;AAAA,IACX,KAAK;AAAA,IACL,QAAQ;AAAA,EAChB,CAAK;AACL;AAGO,SAAS,WAAW,MAAM;AAC7B,QAAM,aAAa,gBAAgB;AACnC,SAAOA,oBAAQ;AAAA,IACX,KAAK;AAAA,IACL,QAAQ;AAAA,IACR;AAAA,IACA,QAAQ,aAAa;AAAA,MACjB,gBAAgB;AAAA,IAC5B,IAAY;AAAA,EACZ,CAAK;AACL;AAWO,SAAS,cAAc,IAAI,MAAM;AACpC,QAAM,aAAa,gBAAgB;AACnC,SAAOA,oBAAQ;AAAA,IACX,KAAK,mBAAmB,EAAE;AAAA,IAC1B,QAAQ;AAAA,IACR;AAAA,IACA,QAAQ,aAAa;AAAA,MACjB,gBAAgB;AAAA,IAC5B,IAAY;AAAA,EACZ,CAAK;AACL;AAYO,SAAS,cAAc,IAAI;AAC9B,SAAOA,oBAAQ;AAAA,IACX,KAAK,mBAAmB,EAAE;AAAA,IAC1B,QAAQ;AAAA,EAChB,CAAK;AACL;;;;;;;;;"}