{"version":3,"file":"order.js","sources":["api/order.js"],"sourcesContent":["import request from './request';\r\n\r\n// 创建订单（点餐）\r\nexport function createOrder(data) {\r\n    return request({\r\n        url: '/orders/demand-orders/',\r\n        method: 'POST',\r\n        data\r\n    });\r\n}\r\n\r\n// 获取订单列表（包含发出和收到的）\r\nexport function getOrders() {\r\n    return request({\r\n        url: '/orders/demand-orders/',\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\n// 获取我发出的订单列表\r\nexport function getSentOrders() {\r\n    return request({\r\n        url: '/orders/demand-orders/sent/',\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\n// 获取我收到的订单列表\r\nexport function getReceivedOrders() {\r\n    return request({\r\n        url: '/orders/demand-orders/received/',\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\n// 获取订单详情\r\nexport function getOrderDetail(id) {\r\n    return request({\r\n        url: `/orders/demand-orders/${id}/`,\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\n// 更新订单状态\r\nexport function updateOrderStatus(orderId, data) {\r\n    return request({\r\n        url: `/orders/demand-orders/${orderId}/update_status/`,\r\n        method: 'PATCH',\r\n        data\r\n    });\r\n}\r\n\r\n// 更新订单条目（评价或记账）\r\nexport function updateOrderItem(itemId, data) {\r\n    return request({\r\n        url: `/orders/demand-order-items/${itemId}/`,\r\n        method: 'PATCH',\r\n        data\r\n    });\r\n}\r\n\r\n// 添加订单评价\r\nexport function addOrderReview(orderId, data) {\r\n    return request({\r\n        url: `/orders/demand-orders/${orderId}/add_review/`,\r\n        method: 'POST',\r\n        data\r\n    });\r\n}\r\n\r\n// 订单状态常量\r\nexport const ORDER_STATUS = {\r\n    PENDING: 'PENDING',\r\n    CONFIRMED: 'CONFIRMED',\r\n    ORDERED: 'ORDERED',\r\n    COMPLETED: 'COMPLETED',\r\n    RATED: 'RATED',\r\n    CANCELLED: 'CANCELLED'\r\n};\r\n\r\nexport const ORDER_STATUS_TEXT = {\r\n    [ORDER_STATUS.PENDING]: '待处理',\r\n    [ORDER_STATUS.CONFIRMED]: '已确认',\r\n    [ORDER_STATUS.ORDERED]: '已下单',\r\n    [ORDER_STATUS.COMPLETED]: '已完成',\r\n    [ORDER_STATUS.RATED]: '已评价',\r\n    [ORDER_STATUS.CANCELLED]: '已取消'\r\n};\r\n\r\n// 获取订单状态文本\r\nexport function getOrderStatusText(status) {\r\n    return ORDER_STATUS_TEXT[status] || '未知状态';\r\n}\r\n\r\n// 判断订单是否可以取消\r\nexport function canCancelOrder(status) {\r\n    return [ORDER_STATUS.PENDING, ORDER_STATUS.CONFIRMED].includes(status);\r\n}\r\n\r\n// 判断订单是否可以评价\r\nexport function canReviewOrder(status) {\r\n    return status === ORDER_STATUS.COMPLETED;\r\n}"],"names":["request"],"mappings":";;AAGO,SAAS,YAAY,MAAM;AAC9B,SAAOA,oBAAQ;AAAA,IACX,KAAK;AAAA,IACL,QAAQ;AAAA,IACR;AAAA,EACR,CAAK;AACL;AAGO,SAAS,YAAY;AACxB,SAAOA,oBAAQ;AAAA,IACX,KAAK;AAAA,IACL,QAAQ;AAAA,EAChB,CAAK;AACL;AAmBO,SAAS,eAAe,IAAI;AAC/B,SAAOA,oBAAQ;AAAA,IACX,KAAK,yBAAyB,EAAE;AAAA,IAChC,QAAQ;AAAA,EAChB,CAAK;AACL;AAGO,SAAS,kBAAkB,SAAS,MAAM;AAC7C,SAAOA,oBAAQ;AAAA,IACX,KAAK,yBAAyB,OAAO;AAAA,IACrC,QAAQ;AAAA,IACR;AAAA,EACR,CAAK;AACL;AAGO,SAAS,gBAAgB,QAAQ,MAAM;AAC1C,SAAOA,oBAAQ;AAAA,IACX,KAAK,8BAA8B,MAAM;AAAA,IACzC,QAAQ;AAAA,IACR;AAAA,EACR,CAAK;AACL;;;;;;"}