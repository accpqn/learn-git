{"version":3,"file":"menu-manage.js","sources":["pages/settings/menu-manage.vue","../../../../App/hbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2V0dGluZ3MvbWVudS1tYW5hZ2UudnVl"],"sourcesContent":["<template>\n\t<view class=\"menu-manage-container\">\n\t\t<!-- 功能选项卡 -->\n\t\t<view class=\"tab-section\">\n\t\t\t<view class=\"tab-item\" :class=\"{ active: currentTab === 0 }\" @click=\"switchTab(0)\">\n\t\t\t\t<text class=\"tab-text\">分类管理</text>\n\t\t\t</view>\n\t\t\t<view class=\"tab-item\" :class=\"{ active: currentTab === 1 }\" @click=\"switchTab(1)\">\n\t\t\t\t<text class=\"tab-text\">商品管理</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 内容区域 -->\n\t\t<view class=\"content-section\">\n\t\t\t<!-- 分类管理 -->\n\t\t\t<view v-if=\"currentTab === 0\" class=\"tab-content\">\n\t\t\t\t<view class=\"add-section\">\n\t\t\t\t\t<button class=\"add-btn\" @click=\"showAddCategoryModal\">\n\t\t\t\t\t\t<text class=\"add-icon\">+</text>\n\t\t\t\t\t\t<text class=\"add-text\">添加分类</text>\n\t\t\t\t\t</button>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"list-section\">\n\t\t\t\t\t<view v-for=\"category in categories\" :key=\"category.id\" class=\"list-item\">\n\t\t\t\t\t\t<view class=\"item-info\">\n\t\t\t\t\t\t\t<view class=\"item-name\">{{ category.name }}</view>\n\t\t\t\t\t\t\t<view class=\"item-desc\">{{ category.description || '暂无描述' }}</view>\n\t\t\t\t\t\t\t<view class=\"item-extra\">{{ getCategoryProductCount(category.id) }} 个商品</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"item-actions\">\n\t\t\t\t\t\t\t<button class=\"action-btn edit\" @click=\"editCategory(category)\">编辑</button>\n\t\t\t\t\t\t\t<button class=\"action-btn delete\" @click=\"deleteCategory(category)\">删除</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view v-if=\"categories.length === 0\" class=\"empty-state\">\n\t\t\t\t\t\t<text class=\"empty-icon\">📋</text>\n\t\t\t\t\t\t<text class=\"empty-text\">还没有分类，点击上方按钮添加</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 商品管理 -->\n\t\t\t<view v-if=\"currentTab === 1\" class=\"tab-content\">\n\t\t\t\t<view class=\"add-section\">\n\t\t\t\t\t<button class=\"add-btn\" @click=\"showAddProductModal\">\n\t\t\t\t\t\t<text class=\"add-icon\">+</text>\n\t\t\t\t\t\t<text class=\"add-text\">添加商品</text>\n\t\t\t\t\t</button>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"list-section\">\n\t\t\t\t\t<view v-for=\"product in products\" :key=\"product.id\" class=\"list-item product-item\">\n\t\t\t\t\t\t<view class=\"product-image\">\n\t\t\t\t\t\t\t<image\n\t\t\t\t\t\t\t\t:src=\"getProductImageUrl(product)\"\n\t\t\t\t\t\t\t\tclass=\"product-list-image\"\n\t\t\t\t\t\t\t\tmode=\"aspectFill\"\n\t\t\t\t\t\t\t></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"item-info\">\n\t\t\t\t\t\t\t<view class=\"item-name\">{{ product.name }}</view>\n\t\t\t\t\t\t\t<view class=\"item-desc\">{{ product.category_name || '未知分类' }}</view>\n\t\t\t\t\t\t\t<view class=\"item-extra\">¥{{ product.price }}</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"item-actions\">\n\t\t\t\t\t\t\t<button class=\"action-btn edit\" @click=\"editProduct(product)\">编辑</button>\n\t\t\t\t\t\t\t<button class=\"action-btn delete\" @click=\"deleteProduct(product)\">删除</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view v-if=\"products.length === 0\" class=\"empty-state\">\n\t\t\t\t\t\t<text class=\"empty-icon\">🍎</text>\n\t\t\t\t\t\t<text class=\"empty-text\">还没有商品，点击上方按钮添加</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 添加/编辑分类弹窗 -->\n\t\t<view v-if=\"showCategoryModal\" class=\"modal-overlay\" @click=\"closeCategoryModal\">\n\t\t\t<view class=\"modal-container\" @click.stop>\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">{{ categoryForm.id ? '编辑分类' : '添加分类' }}</text>\n\t\t\t\t\t<text class=\"modal-close\" @click=\"closeCategoryModal\">×</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-content\">\n\t\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t\t<text class=\"form-label\">分类名称 *</text>\n\t\t\t\t\t\t<input class=\"form-input\" v-model=\"categoryForm.name\" placeholder=\"请输入分类名称\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t\t<text class=\"form-label\">分类描述</text>\n\t\t\t\t\t\t<textarea class=\"form-textarea\" v-model=\"categoryForm.description\" placeholder=\"请输入分类描述（可选）\"></textarea>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-footer\">\n\t\t\t\t\t<button class=\"modal-btn cancel\" @click=\"closeCategoryModal\">取消</button>\n\t\t\t\t\t<button class=\"modal-btn confirm\" @click=\"saveCategoryModal\">确定</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 添加/编辑商品弹窗 -->\n\t\t<view v-if=\"showProductModal\" class=\"modal-overlay\" @click=\"closeProductModal\">\n\t\t\t<view class=\"modal-container\" @click.stop>\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">{{ productForm.id ? '编辑商品' : '添加商品' }}</text>\n\t\t\t\t\t<text class=\"modal-close\" @click=\"closeProductModal\">×</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-content\">\n\t\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t\t<text class=\"form-label\">商品名称 *</text>\n\t\t\t\t\t\t<input class=\"form-input\" v-model=\"productForm.name\" placeholder=\"请输入商品名称\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t\t<text class=\"form-label\">商品价格 *</text>\n\t\t\t\t\t\t<input class=\"form-input\" v-model=\"productForm.price\" placeholder=\"请输入价格\" type=\"number\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t\t<text class=\"form-label\">所属分类 *</text>\n\t\t\t\t\t\t<picker class=\"form-picker\" :value=\"productForm.categoryIndex\" :range=\"categoryOptions\" @change=\"handleCategoryChange\">\n\t\t\t\t\t\t\t<view class=\"picker-display\">\n\t\t\t\t\t\t\t\t{{ categoryOptions[productForm.categoryIndex] || '请选择分类' }}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</picker>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t\t<text class=\"form-label\">商品描述</text>\n\t\t\t\t\t\t<textarea class=\"form-textarea\" v-model=\"productForm.description\" placeholder=\"请输入商品描述（可选）\"></textarea>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t\t<text class=\"form-label\">商品图片</text>\n\t\t\t\t\t\t<view class=\"image-upload\" @click=\"chooseImage\">\n\t\t\t\t\t\t\t<image v-if=\"productForm.imageUrl\" :src=\"productForm.imageUrl\" class=\"upload-image\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view v-else class=\"upload-placeholder\">\n\t\t\t\t\t\t\t\t<text class=\"upload-icon\">📷</text>\n\t\t\t\t\t\t\t\t<text class=\"upload-text\">点击上传图片</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"productForm.imageUrl\" class=\"image-actions\">\n\t\t\t\t\t\t\t<button class=\"remove-image-btn\" @click=\"removeImage\">删除图片</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-footer\">\n\t\t\t\t\t<button class=\"modal-btn cancel\" @click=\"closeProductModal\">取消</button>\n\t\t\t\t\t<button class=\"modal-btn confirm\" @click=\"saveProductModal\">确定</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { ref, reactive, computed, onMounted } from 'vue';\nimport { getCategories, addCategory, updateCategory, deleteCategory as deleteCategoryApi } from '@/api/menu';\nimport { getProducts, addProduct, updateProduct, deleteProduct as deleteProductApi } from '@/api/menu';\nimport config, { getProductImageUrl as getImageUrl } from '@/config/index';\nimport { useTheme } from '@/mixins/theme';\nimport { useThemeStore } from '@/store/theme';\nimport { onShow } from '@dcloudio/uni-app';\n\nexport default {\n\tname: 'MenuManage',\n\tsetup() {\n\t\t// 主题功能\n\t\tconst { currentTheme, getThemeColor, getButtonStyle, getHeaderStyle } = useTheme();\n\t\tconst themeStore = useThemeStore();\n\n\t\t// 数据状态\n\t\tconst categories = ref([]);\n\t\tconst products = ref([]);\n\t\tconst loading = ref(false);\n\t\tconst currentTab = ref(0);\n\n\t\t// 分类弹窗\n\t\tconst showCategoryModal = ref(false);\n\t\tconst categoryForm = reactive({\n\t\t\tid: null,\n\t\t\tname: '',\n\t\t\tdescription: ''\n\t\t});\n\n\t\t// 商品弹窗\n\t\tconst showProductModal = ref(false);\n\t\tconst productForm = reactive({\n\t\t\tid: null,\n\t\t\tname: '',\n\t\t\tprice: '',\n\t\t\tcategory: null,\n\t\t\tcategoryIndex: 0,\n\t\t\tdescription: '',\n\t\t\timageUrl: '',\n\t\t\timageFile: null\n\t\t});\n\n\t\t// 计算属性\n\t\tconst categoryOptions = computed(() => {\n\t\t\treturn categories.value.map(cat => cat.name);\n\t\t});\n\n\t\t// 页面初始化\n\t\tonMounted(() => {\n\t\t\tloadData();\n\t\t});\n\n\t\t// 页面显示时立即设置导航栏主题\n\t\tonShow(() => {\n\t\t\t// 立即设置导航栏主题，避免颜色过渡\n\t\t\ttry {\n\t\t\t\tuni.setNavigationBarColor({\n\t\t\t\t\tfrontColor: '#ffffff',\n\t\t\t\t\tbackgroundColor: themeStore.currentTheme.primaryColor,\n\t\t\t\t\tanimation: {\n\t\t\t\t\t\tduration: 0,  // 立即生效\n\t\t\t\t\t\ttimingFunc: 'linear'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log('设置导航栏主题失败:', error);\n\t\t\t}\n\n\t\t\t// 同时通知App.vue\n\t\t\tuni.$emit('onPageShow', 'pages/settings/menu-manage');\n\t\t});\n\n\t\t// 加载数据\n\t\tconst loadData = async () => {\n\t\t\tloading.value = true;\n\t\t\ttry {\n\t\t\t\tawait Promise.all([\n\t\t\t\t\tloadCategories(),\n\t\t\t\t\tloadProducts()\n\t\t\t\t]);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载数据失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '加载数据失败',\n\t\t\t\t\ticon: 'error'\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tloading.value = false;\n\t\t\t}\n\t\t};\n\n\t\t// 加载分类\n\t\tconst loadCategories = async () => {\n\t\t\ttry {\n\t\t\t\tconst data = await getCategories();\n\t\t\t\tcategories.value = data.sort((a, b) => (a.sort_order || 0) - (b.sort_order || 0));\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载分类失败:', error);\n\t\t\t}\n\t\t};\n\n\t\t// 加载商品\n\t\tconst loadProducts = async () => {\n\t\t\ttry {\n\t\t\t\tconst data = await getProducts();\n\t\t\t\tproducts.value = data.sort((a, b) => (a.sort_order || 0) - (b.sort_order || 0));\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载商品失败:', error);\n\t\t\t}\n\t\t};\n\n\t\t// 切换选项卡\n\t\tconst switchTab = (index) => {\n\t\t\tcurrentTab.value = index;\n\t\t};\n\n\t\t// 使用配置文件中的图片URL处理方法\n\t\tconst getProductImageUrl = getImageUrl;\n\n\t\t// 获取分类下的商品数量\n\t\tconst getCategoryProductCount = (categoryId) => {\n\t\t\treturn products.value.filter(p => p.category === categoryId).length;\n\t\t};\n\n\t\t// 获取分类名称\n\t\tconst getCategoryName = (categoryId) => {\n\t\t\tconst category = categories.value.find(cat => cat.id === categoryId);\n\t\t\treturn category ? category.name : '未知分类';\n\t\t};\n\n\t\t// ==================== 分类管理 ====================\n\n\t\t// 显示添加分类弹窗\n\t\tconst showAddCategoryModal = () => {\n\t\t\tconsole.log('显示添加分类弹窗');\n\t\t\tresetCategoryForm();\n\t\t\tshowCategoryModal.value = true;\n\t\t};\n\n\t\t// 编辑分类\n\t\tconst editCategory = (category) => {\n\t\t\tcategoryForm.id = category.id;\n\t\t\tcategoryForm.name = category.name;\n\t\t\tcategoryForm.description = category.description || '';\n\t\t\tshowCategoryModal.value = true;\n\t\t};\n\n\t\t// 重置分类表单\n\t\tconst resetCategoryForm = () => {\n\t\t\tcategoryForm.id = null;\n\t\t\tcategoryForm.name = '';\n\t\t\tcategoryForm.description = '';\n\t\t};\n\n\t\t// 保存分类\n\t\tconst saveCategoryModal = async () => {\n\t\t\tconsole.log('保存分类开始', categoryForm);\n\t\t\tif (!categoryForm.name.trim()) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入分类名称',\n\t\t\t\t\ticon: 'error'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst data = {\n\t\t\t\t\tname: categoryForm.name.trim(),\n\t\t\t\t\tdescription: categoryForm.description.trim()\n\t\t\t\t};\n\t\t\t\tconsole.log('准备发送的数据:', data);\n\n\t\t\t\tif (categoryForm.id) {\n\t\t\t\t\t// 编辑\n\t\t\t\t\tconsole.log('编辑分类:', categoryForm.id);\n\t\t\t\t\tawait updateCategory(categoryForm.id, data);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '分类更新成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// 新增\n\t\t\t\t\tconsole.log('新增分类');\n\t\t\t\t\tconst result = await addCategory(data);\n\t\t\t\t\tconsole.log('新增分类结果:', result);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '分类添加成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tshowCategoryModal.value = false;\n\t\t\t\tawait loadCategories();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('保存分类失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '保存失败: ' + (error.message || '未知错误'),\n\t\t\t\t\ticon: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t// 关闭分类弹窗\n\t\tconst closeCategoryModal = () => {\n\t\t\tshowCategoryModal.value = false;\n\t\t\tresetCategoryForm();\n\t\t};\n\n\t\t// 删除分类\n\t\tconst deleteCategory = (category) => {\n\t\t\tconst productCount = getCategoryProductCount(category.id);\n\t\t\tconst message = productCount > 0\n\t\t\t\t? `分类\"${category.name}\"下有${productCount}个商品，删除分类将同时删除所有商品，确定要删除吗？`\n\t\t\t\t: `确定要删除分类\"${category.name}\"吗？`;\n\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '确认删除',\n\t\t\t\tcontent: message,\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait deleteCategoryApi(category.id);\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait loadData(); // 重新加载所有数据\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error('删除分类失败:', error);\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '删除失败',\n\t\t\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t// ==================== 商品管理 ====================\n\n\t\t// 显示添加商品弹窗\n\t\tconst showAddProductModal = (categoryId = null) => {\n\t\t\tconsole.log('显示添加商品弹窗', categoryId);\n\t\t\tif (categories.value.length === 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请先添加分类',\n\t\t\t\t\ticon: 'error'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresetProductForm();\n\t\t\tif (categoryId) {\n\t\t\t\tconst categoryIndex = categories.value.findIndex(cat => cat.id === categoryId);\n\t\t\t\tif (categoryIndex > -1) {\n\t\t\t\t\tproductForm.category = categoryId;\n\t\t\t\t\tproductForm.categoryIndex = categoryIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshowProductModal.value = true;\n\t\t};\n\n\t\t// 编辑商品\n\t\tconst editProduct = (product) => {\n\t\t\tproductForm.id = product.id;\n\t\t\tproductForm.name = product.name;\n\t\t\tproductForm.price = product.price.toString();\n\t\t\tproductForm.category = product.category;\n\t\t\tproductForm.categoryIndex = categories.value.findIndex(cat => cat.id === product.category);\n\t\t\tproductForm.description = product.description || '';\n\t\t\tproductForm.imageUrl = getProductImageUrl(product);\n\t\t\tshowProductModal.value = true;\n\t\t};\n\n\t\t// 重置商品表单\n\t\tconst resetProductForm = () => {\n\t\t\tproductForm.id = null;\n\t\t\tproductForm.name = '';\n\t\t\tproductForm.price = '';\n\t\t\tproductForm.category = categories.value.length > 0 ? categories.value[0].id : null;\n\t\t\tproductForm.categoryIndex = 0;\n\t\t\tproductForm.description = '';\n\t\t\tproductForm.imageUrl = '';\n\t\t\tproductForm.imageFile = null;\n\t\t};\n\n\t\t// 分类选择变化\n\t\tconst handleCategoryChange = (e) => {\n\t\t\tconst index = e.detail ? e.detail.value : e.target.value;\n\t\t\tproductForm.categoryIndex = index;\n\t\t\tproductForm.category = categories.value[index]?.id;\n\t\t\tconsole.log('分类选择变化:', index, productForm.category);\n\t\t};\n\n\t\t// 选择图片\n\t\tconst chooseImage = () => {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsizeType: ['compressed'],\n\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tproductForm.imageUrl = res.tempFilePaths[0];\n\t\t\t\t\tproductForm.imageFile = res.tempFiles[0];\n\t\t\t\t\tconsole.log('选择图片:', res.tempFilePaths[0]);\n\t\t\t\t},\n\t\t\t\tfail: (error) => {\n\t\t\t\t\tconsole.error('选择图片失败:', error);\n\t\t\t\t\t// 用户取消选择图片时显示友好提示\n\t\t\t\t\tif (error.errMsg && error.errMsg.includes('cancel')) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '图片留着不添加，谁知道长什么样',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '选择图片失败',\n\t\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t// 删除图片\n\t\tconst removeImage = () => {\n\t\t\tproductForm.imageUrl = '';\n\t\t\tproductForm.imageFile = null;\n\t\t};\n\n\t\t// 使用uni.uploadFile上传带图片的商品\n\t\tconst uploadProductWithImage = (productId, data, imagePath, isUpdate) => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst url = isUpdate\n\t\t\t\t\t? `${config.API_BASE_URL}/api/menus/products/${productId}/`\n\t\t\t\t\t: `${config.API_BASE_URL}/api/menus/products/`;\n\n\t\t\t\tconst token = uni.getStorageSync('token');\n\n\t\t\t\tuni.uploadFile({\n\t\t\t\t\turl: url,\n\t\t\t\t\tfilePath: imagePath,\n\t\t\t\t\tname: 'image',\n\t\t\t\t\tformData: {\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\t_method: isUpdate ? 'PUT' : 'POST'\n\t\t\t\t\t},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Authorization': `Bearer ${token}`\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('上传成功:', res);\n\t\t\t\t\t\tif (res.statusCode === 200 || res.statusCode === 201) {\n\t\t\t\t\t\t\tresolve(JSON.parse(res.data));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(new Error(`上传失败: ${res.statusCode}`));\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (error) => {\n\t\t\t\t\t\tconsole.error('上传失败:', error);\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\t// 保存商品\n\t\tconst saveProductModal = async () => {\n\t\t\tconsole.log('保存商品开始', productForm);\n\t\t\tif (!productForm.name.trim()) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入商品名称',\n\t\t\t\t\ticon: 'error'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!productForm.price || parseFloat(productForm.price) <= 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入有效价格',\n\t\t\t\t\ticon: 'error'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!productForm.category) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请选择分类',\n\t\t\t\t\ticon: 'error'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// 基础数据\n\t\t\t\tconst baseData = {\n\t\t\t\t\tname: productForm.name.trim(),\n\t\t\t\t\tprice: parseFloat(productForm.price),\n\t\t\t\t\tcategory: productForm.category,\n\t\t\t\t\tdescription: productForm.description.trim()\n\t\t\t\t};\n\n\t\t\t\tconsole.log('准备发送的商品数据:', baseData);\n\n\t\t\t\tif (productForm.id) {\n\t\t\t\t\t// 编辑商品\n\t\t\t\t\tconsole.log('编辑商品:', productForm.id);\n\n\t\t\t\t\tif (productForm.imageFile) {\n\t\t\t\t\t\t// 有新图片，使用uploadFile\n\t\t\t\t\t\tawait uploadProductWithImage(productForm.id, baseData, productForm.imageUrl, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 没有新图片，使用普通API\n\t\t\t\t\t\tawait updateProduct(productForm.id, baseData);\n\t\t\t\t\t}\n\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '商品更新成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// 新增商品\n\t\t\t\t\tconsole.log('新增商品');\n\n\t\t\t\t\tif (productForm.imageFile) {\n\t\t\t\t\t\t// 有图片，使用uploadFile\n\t\t\t\t\t\tawait uploadProductWithImage(null, baseData, productForm.imageUrl, false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 没有图片，使用普通API\n\t\t\t\t\t\tawait addProduct(baseData);\n\t\t\t\t\t}\n\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '商品添加成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tshowProductModal.value = false;\n\t\t\t\tawait loadProducts();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('保存商品失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '保存失败: ' + (error.message || '未知错误'),\n\t\t\t\t\ticon: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t// 关闭商品弹窗\n\t\tconst closeProductModal = () => {\n\t\t\tshowProductModal.value = false;\n\t\t\tresetProductForm();\n\t\t};\n\n\t\t// 删除商品\n\t\tconst deleteProduct = (product) => {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '确认删除',\n\t\t\t\tcontent: `确定要删除商品\"${product.name}\"吗？`,\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait deleteProductApi(product.id);\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait loadProducts();\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error('删除商品失败:', error);\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '删除失败',\n\t\t\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\tcategories,\n\t\t\tproducts,\n\t\t\tloading,\n\t\t\tcurrentTab,\n\t\t\tshowCategoryModal,\n\t\t\tcategoryForm,\n\t\t\tshowProductModal,\n\t\t\tproductForm,\n\t\t\tcategoryOptions,\n\t\t\tloadData,\n\t\t\tswitchTab,\n\t\t\tgetProductImageUrl,\n\t\t\tgetCategoryProductCount,\n\t\t\tgetCategoryName,\n\t\t\t// 分类管理\n\t\t\tshowAddCategoryModal,\n\t\t\teditCategory,\n\t\t\tsaveCategoryModal,\n\t\t\tcloseCategoryModal,\n\t\t\tdeleteCategory,\n\t\t\t// 商品管理\n\t\t\tshowAddProductModal,\n\t\t\teditProduct,\n\t\t\thandleCategoryChange,\n\t\t\tchooseImage,\n\t\t\tremoveImage,\n\t\t\tuploadProductWithImage,\n\t\t\tsaveProductModal,\n\t\t\tcloseProductModal,\n\t\t\tdeleteProduct,\n\t\t\t// 主题相关\n\t\t\tcurrentTheme,\n\t\t\tgetThemeColor,\n\t\t\tgetButtonStyle,\n\t\t\tgetHeaderStyle\n\t\t};\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.menu-manage-container {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(135deg, var(--theme-background, #FFF5F8) 0%, #F0F8FF 100%);\n}\n\n\n\n.tab-section {\n\tdisplay: flex;\n\tbackground: white;\n\tmargin: 30rpx;\n\tborder-radius: 15rpx;\n\tpadding: 10rpx;\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\n}\n\n.tab-item {\n\tflex: 1;\n\ttext-align: center;\n\tpadding: 20rpx;\n\tborder-radius: 10rpx;\n\ttransition: all 0.3s ease;\n\n\t&.active {\n\t\tbackground: linear-gradient(135deg, var(--theme-primary, #FF69B4), var(--theme-secondary, #FF1493));\n\n\t\t.tab-text {\n\t\t\tcolor: white;\n\t\t}\n\t}\n}\n\n.tab-text {\n\tfont-size: 28rpx;\n\tfont-weight: 500;\n\tcolor: #666;\n}\n\n.content-section {\n\tpadding: 20rpx 30rpx 40rpx;\n}\n\n.tab-content {\n\tbackground: white;\n\tborder-radius: 20rpx;\n\toverflow: hidden;\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\n}\n\n.add-section {\n\tpadding: 30rpx;\n\tborder-bottom: 1rpx solid #F0F0F0;\n}\n\n.add-btn {\n\twidth: 100%;\n\theight: 80rpx;\n\tbackground: linear-gradient(135deg, var(--theme-primary, #FF69B4), var(--theme-secondary, #FF1493));\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 15rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 15rpx;\n\tfont-size: 28rpx;\n\tfont-weight: bold;\n\n\t&::after {\n\t\tborder: none;\n\t}\n\n\t&:active {\n\t\ttransform: translateY(2rpx);\n\t}\n}\n\n.add-icon {\n\tfont-size: 32rpx;\n}\n\n.list-section {\n\tpadding: 0 30rpx 30rpx;\n}\n\n.list-item {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 25rpx 0;\n\tborder-bottom: 1rpx solid #F0F0F0;\n\n\t&:last-child {\n\t\tborder-bottom: none;\n\t}\n\n\t&.product-item {\n\t\t.product-image {\n\t\t\tmargin-right: 20rpx;\n\t\t\tborder-radius: 10rpx;\n\t\t\toverflow: hidden;\n\t\t\twidth: 120rpx;\n\t\t\theight: 120rpx;\n\t\t}\n\t}\n}\n\n.product-list-image {\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: 10rpx;\n}\n\n.item-info {\n\tflex: 1;\n}\n\n.item-name {\n\tfont-size: 30rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n\tmargin-bottom: 8rpx;\n}\n\n.item-desc {\n\tfont-size: 26rpx;\n\tcolor: #666;\n\tmargin-bottom: 5rpx;\n}\n\n.item-extra {\n\tfont-size: 24rpx;\n\tcolor: #999;\n}\n\n.item-actions {\n\tdisplay: flex;\n\tgap: 15rpx;\n}\n\n.action-btn {\n\tpadding: 10rpx 20rpx;\n\tborder-radius: 12rpx;\n\tfont-size: 24rpx;\n\tborder: none;\n\n\t&::after {\n\t\tborder: none;\n\t}\n\n\t&.edit {\n\t\tbackground: #E6F7FF;\n\t\tcolor: #1890FF;\n\t}\n\n\t&.delete {\n\t\tbackground: #FFF2F0;\n\t\tcolor: #FF4D4F;\n\t}\n}\n\n.empty-state {\n\ttext-align: center;\n\tpadding: 80rpx 20rpx;\n\tcolor: #999;\n}\n\n.empty-icon {\n\tfont-size: 80rpx;\n\tdisplay: block;\n\tmargin-bottom: 20rpx;\n}\n\n.empty-text {\n\tfont-size: 28rpx;\n}\n\n/* 弹窗样式 */\n.modal-content {\n\tpadding: 20rpx;\n}\n\n.form-item {\n\tmargin-bottom: 30rpx;\n}\n\n.form-label {\n\tdisplay: block;\n\tfont-size: 28rpx;\n\tcolor: #333;\n\tmargin-bottom: 15rpx;\n\tfont-weight: bold;\n}\n\n.picker-display {\n\tpadding: 20rpx;\n\tbackground: #F8F9FA;\n\tborder-radius: 10rpx;\n\tfont-size: 28rpx;\n\tcolor: #333;\n\tborder: 1rpx solid #E0E0E0;\n}\n\n.image-upload {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 200rpx;\n\theight: 200rpx;\n\tborder: 2rpx dashed #D0D0D0;\n\tborder-radius: 15rpx;\n\tcursor: pointer;\n\ttransition: all 0.3s ease;\n\n\t&:active {\n\t\tborder-color: var(--theme-primary, #FF69B4);\n\t\tbackground: var(--theme-background, #FFF5F8);\n\t}\n}\n\n.upload-placeholder {\n\ttext-align: center;\n\tcolor: #999;\n}\n\n.upload-icon {\n\tfont-size: 60rpx;\n\tdisplay: block;\n\tmargin-bottom: 10rpx;\n}\n\n.upload-text {\n\tfont-size: 24rpx;\n}\n\n.image-actions {\n\tmargin-top: 15rpx;\n\ttext-align: center;\n}\n\n.remove-image-btn {\n\tpadding: 8rpx 16rpx;\n\tbackground: #FFF2F0;\n\tcolor: #FF4D4F;\n\tborder: 1rpx solid #FF4D4F;\n\tborder-radius: 8rpx;\n\tfont-size: 22rpx;\n\n\t&::after {\n\t\tborder: none;\n\t}\n\n\t&:active {\n\t\tbackground: #FFE7E6;\n\t}\n}\n\n/* 自定义弹窗样式 */\n.modal-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(0, 0, 0, 0.6);\n\tbackdrop-filter: blur(10rpx);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 1000;\n\tanimation: fadeIn 0.3s ease-out;\n}\n\n.modal-container {\n\tbackground: white;\n\tborder-radius: 30rpx;\n\twidth: 90%;\n\tmax-width: 650rpx;\n\tmax-height: 85vh;\n\toverflow: hidden;\n\tbox-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.15);\n\tanimation: slideUp 0.3s ease-out;\n\tposition: relative;\n}\n\n@keyframes fadeIn {\n\tfrom { opacity: 0; }\n\tto { opacity: 1; }\n}\n\n@keyframes slideUp {\n\tfrom {\n\t\topacity: 0;\n\t\ttransform: translateY(100rpx) scale(0.9);\n\t}\n\tto {\n\t\topacity: 1;\n\t\ttransform: translateY(0) scale(1);\n\t}\n}\n\n/* 响应式设计 */\n@media screen and (max-width: 750rpx) {\n\t.modal-container {\n\t\twidth: 95%;\n\t\tmargin: 20rpx;\n\t}\n\n\t.modal-content {\n\t\tpadding: 30rpx;\n\t}\n\n\t.modal-footer {\n\t\tpadding: 30rpx;\n\t\tflex-direction: column;\n\t\tgap: 15rpx;\n\t}\n\n\t.modal-btn {\n\t\theight: 80rpx;\n\t}\n}\n\n/* 深色模式支持 */\n@media (prefers-color-scheme: dark) {\n\t.modal-container {\n\t\tbackground: #2C3E50;\n\t\tcolor: white;\n\t}\n\n\t.modal-content {\n\t\tbackground: #34495E;\n\t}\n\n\t.form-input, .form-textarea, .picker-display {\n\t\tbackground: #3A4A5C !important;\n\t\tborder-color: #4A5A6C !important;\n\t\tcolor: white !important;\n\n\t\t&::placeholder {\n\t\t\tcolor: #95A5A6 !important;\n\t\t}\n\t}\n\n\t.form-label {\n\t\tcolor: #ECF0F1 !important;\n\t}\n}\n\n.modal-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 40rpx 40rpx 30rpx;\n\tbackground: linear-gradient(135deg, var(--theme-primary, #FF69B4) 0%, var(--theme-secondary, #FF1493) 100%);\n\tposition: relative;\n\n\t&::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\theight: 1rpx;\n\t\tbackground: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n\t}\n}\n\n.modal-title {\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n\tcolor: white;\n\ttext-shadow: 0 2rpx 4rpx rgba(0,0,0,0.1);\n}\n\n.modal-close {\n\tfont-size: 36rpx;\n\tcolor: rgba(255,255,255,0.8);\n\tcursor: pointer;\n\twidth: 70rpx;\n\theight: 70rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 50%;\n\tbackground: rgba(255,255,255,0.1);\n\tbackdrop-filter: blur(10rpx);\n\ttransition: all 0.3s ease;\n\n\t&:active {\n\t\tbackground: rgba(255,255,255,0.2);\n\t\ttransform: scale(0.95);\n\t}\n}\n\n.modal-content {\n\tpadding: 40rpx;\n\tmax-height: 60vh;\n\toverflow-y: auto;\n\tbackground: #FAFBFC;\n}\n\n.form-item {\n\tmargin-bottom: 50rpx;\n\tposition: relative;\n\n\t&:last-child {\n\t\tmargin-bottom: 20rpx;\n\t}\n}\n\n.form-label {\n\tdisplay: block;\n\tfont-size: 30rpx;\n\tcolor: #2C3E50;\n\tmargin-bottom: 20rpx;\n\tfont-weight: 600;\n\tposition: relative;\n\n\t&::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tleft: -15rpx;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\twidth: 6rpx;\n\t\theight: 20rpx;\n\t\tbackground: linear-gradient(135deg, var(--theme-primary, #FF69B4), var(--theme-secondary, #FF1493));\n\t\tborder-radius: 3rpx;\n\t}\n}\n\n.form-input, .form-textarea {\n\twidth: 100%;\n\tpadding: 30rpx 25rpx;\n\tborder: 2rpx solid #E8ECEF;\n\tborder-radius: 15rpx;\n\tfont-size: 32rpx;\n\tcolor: #2C3E50 !important;\n\tbackground: white !important;\n\tbox-sizing: border-box;\n\ttransition: all 0.3s ease;\n\tmin-height: 90rpx;\n\tline-height: 1.4;\n\n\t&:focus {\n\t\tborder-color: var(--theme-primary, #FF69B4);\n\t\tbackground: #FEFEFE !important;\n\t\tbox-shadow: 0 0 0 6rpx rgba(255, 105, 180, 0.1);\n\t\tcolor: #2C3E50 !important;\n\t}\n\n\t&::placeholder {\n\t\tcolor: #BDC3C7 !important;\n\t\topacity: 1;\n\t}\n}\n\n.form-textarea {\n\theight: 180rpx;\n\tresize: none;\n\tline-height: 1.6;\n\tfont-family: inherit;\n\tmin-height: 180rpx;\n\tpadding: 30rpx 25rpx;\n}\n\n/* 确保输入框在所有情况下都能正常显示 */\n.form-input {\n\t-webkit-appearance: none;\n\tappearance: none;\n\toutline: none;\n\tfont-family: inherit;\n}\n\n/* 修复可能的样式冲突 */\n.modal-container input.form-input,\n.modal-container textarea.form-textarea {\n\tbackground-color: white !important;\n\tcolor: #2C3E50 !important;\n\tborder: 2rpx solid #E8ECEF !important;\n\tfont-size: 32rpx !important;\n\tpadding: 30rpx 25rpx !important;\n\tmin-height: 90rpx !important;\n\tline-height: 1.4 !important;\n\n\t&::-webkit-input-placeholder {\n\t\tcolor: #BDC3C7 !important;\n\t\topacity: 1 !important;\n\t}\n\n\t&::-moz-placeholder {\n\t\tcolor: #BDC3C7 !important;\n\t\topacity: 1 !important;\n\t}\n\n\t&:-ms-input-placeholder {\n\t\tcolor: #BDC3C7 !important;\n\t\topacity: 1 !important;\n\t}\n\n\t&::placeholder {\n\t\tcolor: #BDC3C7 !important;\n\t\topacity: 1 !important;\n\t}\n}\n\n/* 文本域特殊处理 */\n.modal-container textarea.form-textarea {\n\tmin-height: 180rpx !important;\n\theight: 180rpx !important;\n}\n\n/* 选择器样式修复 */\n.modal-container .picker-display {\n\tbackground-color: white !important;\n\tcolor: #2C3E50 !important;\n\tborder: 2rpx solid #E8ECEF !important;\n\tfont-size: 32rpx !important;\n\tpadding: 30rpx 25rpx !important;\n\tmin-height: 90rpx !important;\n\tline-height: 1.4 !important;\n}\n\n/* 确保在小程序环境下也能正常显示 */\n.modal-container .form-input,\n.modal-container .form-textarea,\n.modal-container .picker-display {\n\t-webkit-text-fill-color: #2C3E50 !important;\n\t-webkit-opacity: 1 !important;\n}\n\n.form-picker {\n\twidth: 100%;\n}\n\n.picker-display {\n\tpadding: 30rpx 25rpx;\n\tbackground: white !important;\n\tborder: 2rpx solid #E8ECEF;\n\tborder-radius: 15rpx;\n\tfont-size: 32rpx;\n\tcolor: #2C3E50 !important;\n\ttransition: all 0.3s ease;\n\tposition: relative;\n\tmin-height: 90rpx;\n\tline-height: 1.4;\n\tdisplay: flex;\n\talign-items: center;\n\n\t&::after {\n\t\tcontent: '▼';\n\t\tposition: absolute;\n\t\tright: 25rpx;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tcolor: #BDC3C7;\n\t\tfont-size: 24rpx;\n\t}\n\n\t&:active {\n\t\tborder-color: var(--theme-primary, #FF69B4);\n\t\tbackground: #FEFEFE !important;\n\t}\n}\n\n.image-upload {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 220rpx;\n\theight: 220rpx;\n\tborder: 3rpx dashed #E8ECEF;\n\tborder-radius: 20rpx;\n\tcursor: pointer;\n\ttransition: all 0.3s ease;\n\tbackground: white;\n\tposition: relative;\n\toverflow: hidden;\n\n\t&:active {\n\t\tborder-color: var(--theme-primary, #FF69B4);\n\t\tbackground: var(--theme-background, #FFF5F8);\n\t\ttransform: scale(0.98);\n\t}\n\n\t&::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground: linear-gradient(45deg, transparent 30%, rgba(255, 105, 180, 0.05) 50%, transparent 70%);\n\t\topacity: 0;\n\t\ttransition: opacity 0.3s ease;\n\t}\n\n\t&:hover::before {\n\t\topacity: 1;\n\t}\n}\n\n.upload-image {\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: 17rpx;\n\tobject-fit: cover;\n}\n\n.upload-placeholder {\n\ttext-align: center;\n\tcolor: #95A5A6;\n\tz-index: 1;\n\tposition: relative;\n}\n\n.upload-icon {\n\tfont-size: 70rpx;\n\tdisplay: block;\n\tmargin-bottom: 15rpx;\n\tcolor: var(--theme-primary, #FF69B4);\n\topacity: 0.7;\n}\n\n.upload-text {\n\tfont-size: 26rpx;\n\tfont-weight: 500;\n}\n\n.image-actions {\n\tmargin-top: 20rpx;\n\ttext-align: center;\n}\n\n.remove-image-btn {\n\tpadding: 12rpx 24rpx;\n\tbackground: linear-gradient(135deg, #FFE5E5, #FFD6D6);\n\tcolor: #E74C3C;\n\tborder: 2rpx solid #E74C3C;\n\tborder-radius: 12rpx;\n\tfont-size: 24rpx;\n\tfont-weight: 500;\n\ttransition: all 0.3s ease;\n\n\t&::after {\n\t\tborder: none;\n\t}\n\n\t&:active {\n\t\tbackground: linear-gradient(135deg, #FFD6D6, #FFC7C7);\n\t\ttransform: scale(0.95);\n\t}\n}\n\n.modal-footer {\n\tdisplay: flex;\n\tgap: 25rpx;\n\tpadding: 40rpx;\n\tbackground: white;\n\tborder-top: 1rpx solid #F0F2F5;\n}\n\n.modal-btn {\n\tflex: 1;\n\theight: 90rpx;\n\tborder: none;\n\tborder-radius: 20rpx;\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\ttransition: all 0.3s ease;\n\tposition: relative;\n\toverflow: hidden;\n\n\t&::after {\n\t\tborder: none;\n\t}\n\n\t&::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: -100%;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n\t\ttransition: left 0.5s ease;\n\t}\n\n\t&.cancel {\n\t\tbackground: linear-gradient(135deg, #F8F9FA, #E9ECEF);\n\t\tcolor: #6C757D;\n\t\tborder: 2rpx solid #E9ECEF;\n\n\t\t&:active {\n\t\t\tbackground: linear-gradient(135deg, #E9ECEF, #DEE2E6);\n\t\t\ttransform: scale(0.98);\n\t\t}\n\t}\n\n\t&.confirm {\n\t\tbackground: linear-gradient(135deg, var(--theme-primary, #FF69B4), var(--theme-secondary, #FF1493));\n\t\tcolor: white;\n\t\tbox-shadow: 0 8rpx 25rpx rgba(255, 105, 180, 0.3);\n\n\t\t&:active {\n\t\t\ttransform: scale(0.98);\n\t\t\tbox-shadow: 0 4rpx 15rpx rgba(255, 105, 180, 0.4);\n\t\t}\n\n\t\t&:active::before {\n\t\t\tleft: 100%;\n\t\t}\n\t}\n}\n</style>\n","import MiniProgramPage from 'D:/Python/python_doc/xcx/uniapp_front/pages/settings/menu-manage.vue'\nwx.createPage(MiniProgramPage)"],"names":["useTheme","useThemeStore","ref","reactive","computed","onMounted","onShow","uni","getCategories","getProducts","getImageUrl","updateCategory","addCategory","deleteCategoryApi","config","updateProduct","addProduct","deleteProductApi"],"mappings":"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"}