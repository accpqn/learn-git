{"version":3,"file":"register.js","sources":["pages/public/register.vue","../../../../App/hbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHVibGljL3JlZ2lzdGVyLnZ1ZQ"],"sourcesContent":["<template>\r\n    <view class=\"register-container\">\r\n        <view class=\"header\">\r\n            <text class=\"title\">注册账号</text>\r\n            <text class=\"subtitle\">创建您的专属账号</text>\r\n        </view>\r\n        \r\n        <view class=\"form-section\">\r\n            <view class=\"input-group\">\r\n                <input \r\n                    class=\"input\" \r\n                    type=\"text\" \r\n                    v-model=\"form.email\" \r\n                    placeholder=\"请输入邮箱\"\r\n                    placeholder-class=\"placeholder\"\r\n                />\r\n            </view>\r\n            <view class=\"input-group code-group\">\r\n                <input \r\n                    class=\"input code-input\" \r\n                    type=\"text\" \r\n                    v-model=\"form.code\" \r\n                    placeholder=\"请输入验证码\"\r\n                    placeholder-class=\"placeholder\"\r\n                    maxlength=\"6\"\r\n                />\r\n                <button \r\n                    class=\"code-btn\" \r\n                    :disabled=\"!isEmailValid || countdown > 0\"\r\n                    @click=\"handleSendCode\"\r\n                >\r\n                    {{ countdown > 0 ? `${countdown}秒后重试` : '获取验证码' }}\r\n                </button>\r\n            </view>\r\n            <view class=\"input-group\">\r\n                <input \r\n                    class=\"input\" \r\n                    type=\"password\" \r\n                    v-model=\"form.password\" \r\n                    placeholder=\"请输入密码\"\r\n                    placeholder-class=\"placeholder\"\r\n                />\r\n            </view>\r\n            <view class=\"input-group\">\r\n                <input \r\n                    class=\"input\" \r\n                    type=\"password\" \r\n                    v-model=\"form.confirmPassword\" \r\n                    placeholder=\"请确认密码\"\r\n                    placeholder-class=\"placeholder\"\r\n                />\r\n            </view>\r\n            \r\n            <button \r\n                class=\"register-btn\" \r\n                type=\"primary\" \r\n                @click=\"handleRegister\" \r\n                :disabled=\"!isFormValid || isRegistering\"\r\n            >\r\n                {{ isRegistering ? '注册中...' : '注册' }}\r\n            </button>\r\n            \r\n            <view class=\"login-link\">\r\n                <text>已有账号？</text>\r\n                <navigator :url=\"loginUrl\" class=\"link\" open-type=\"redirect\">返回登录</navigator>\r\n            </view>\r\n        </view>\r\n        \r\n        <agreement-links></agreement-links>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\nimport { APP_CONFIG } from '@/utils/config';\r\nimport AgreementLinks from '@/components/public/AgreementLinks.vue';\r\nimport { useUserStore } from '@/store/user';\r\n\r\nexport default {\r\n    components: {\r\n        AgreementLinks\r\n    },\r\n    \r\n    setup() {\r\n        const userStore = useUserStore();\r\n        return {\r\n            userStore\r\n        }\r\n    },\r\n    \r\n    data() {\r\n        return {\r\n            form: {\r\n                email: '',\r\n                password: '',\r\n                confirmPassword: '',\r\n                code: ''\r\n            },\r\n            countdown: 0,\r\n            loginUrl: APP_CONFIG.pages.login\r\n        }\r\n    },\r\n    \r\n    computed: {\r\n        isFormValid() {\r\n            return (\r\n                this.form.email && \r\n                this.form.password && \r\n                this.form.confirmPassword &&\r\n                this.form.code &&\r\n                this.form.password === this.form.confirmPassword\r\n            );\r\n        },\r\n        \r\n        isEmailValid() {\r\n            return this.validateEmail(this.form.email);\r\n        },\r\n        \r\n        isRegistering() {\r\n            return this.userStore.registerStatus === 'pending';\r\n        }\r\n    },\r\n    \r\n    methods: {\r\n        validateEmail(email) {\r\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n            return emailRegex.test(email);\r\n        },\r\n        \r\n        async handleSendCode() {\r\n            if (!this.isEmailValid) {\r\n                uni.showToast({\r\n                    title: '请输入有效的邮箱地址',\r\n                    icon: 'none'\r\n                });\r\n                return;\r\n            }\r\n            \r\n            try {\r\n                await this.userStore.sendVerificationCode(this.form.email);\r\n                \r\n                this.countdown = 60;\r\n                const timer = setInterval(() => {\r\n                    this.countdown--;\r\n                    if (this.countdown <= 0) {\r\n                        clearInterval(timer);\r\n                    }\r\n                }, 1000);\r\n                \r\n                uni.showToast({\r\n                    title: '验证码已发送',\r\n                    icon: 'success'\r\n                });\r\n            } catch (error) {\r\n                uni.showToast({\r\n                    title: error.message || '发送验证码失败',\r\n                    icon: 'none'\r\n                });\r\n            }\r\n        },\r\n        \r\n        async handleRegister() {\r\n            if (!this.isFormValid) return;\r\n            \r\n            if (!this.isEmailValid) {\r\n                uni.showToast({\r\n                    title: '请输入有效的邮箱地址',\r\n                    icon: 'none'\r\n                });\r\n                return;\r\n            }\r\n            \r\n            try {\r\n                const success = await this.userStore.register({\r\n                    email: this.form.email,\r\n                    password: this.form.password,\r\n                    code: this.form.code\r\n                });\r\n                \r\n                if (success) {\r\n                    uni.showToast({\r\n                        title: '注册成功',\r\n                        icon: 'success'\r\n                    });\r\n\r\n                    setTimeout(() => {\r\n                        // 注册成功后跳转到首页\r\n                        uni.switchTab({\r\n                            url: '/pages/home/index'\r\n                        });\r\n                    }, 1500);\r\n                }\r\n            } catch (error) {\r\n                uni.showToast({\r\n                    title: error.message || '注册失败',\r\n                    icon: 'none'\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.register-container {\r\n    min-height: 100vh;\r\n    background-color: #FFF;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n}\r\n\r\n.header {\r\n    padding: 80rpx 40rpx;\r\n    text-align: center;\r\n}\r\n\r\n.title {\r\n    font-size: 48rpx;\r\n    font-weight: bold;\r\n    color: #333;\r\n    margin-bottom: 20rpx;\r\n    display: block;\r\n}\r\n\r\n.subtitle {\r\n    font-size: 28rpx;\r\n    color: #999;\r\n    display: block;\r\n}\r\n\r\n.form-section {\r\n    padding: 40rpx;\r\n}\r\n\r\n.input-group {\r\n    margin-bottom: 30rpx;\r\n}\r\n\r\n.input {\r\n    width: 100%;\r\n    height: 90rpx;\r\n    background: #F8F8F8;\r\n    border-radius: 45rpx;\r\n    padding: 0 40rpx;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.placeholder {\r\n    color: #999;\r\n}\r\n\r\n.register-btn {\r\n    background: linear-gradient(to right, #FF69B4, #FFC0CB);\r\n    border-radius: 45rpx;\r\n    height: 90rpx;\r\n    line-height: 90rpx;\r\n    font-size: 32rpx;\r\n    color: #FFF;\r\n    margin-top: 60rpx;\r\n}\r\n\r\n.register-btn[disabled] {\r\n    opacity: 0.6;\r\n    background: linear-gradient(to right, #FF69B4, #FFC0CB);\r\n}\r\n\r\n.register-btn::after {\r\n    border: none;\r\n}\r\n\r\n.login-link {\r\n    text-align: center;\r\n    margin-top: 30rpx;\r\n    font-size: 28rpx;\r\n    color: #999;\r\n}\r\n\r\n.login-link .link {\r\n    color: #FF69B4;\r\n    display: inline;\r\n    margin-left: 10rpx;\r\n}\r\n\r\n.code-group {\r\n    position: relative;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.code-input {\r\n    padding-right: 200rpx;\r\n}\r\n\r\n.code-btn {\r\n    position: absolute;\r\n    right: 20rpx;\r\n    height: 60rpx;\r\n    line-height: 60rpx;\r\n    padding: 0 30rpx;\r\n    font-size: 24rpx;\r\n    color: #FF69B4;\r\n    background: none;\r\n    border: 2rpx solid #FF69B4;\r\n    border-radius: 30rpx;\r\n}\r\n\r\n.code-btn[disabled] {\r\n    color: #999;\r\n    border-color: #999;\r\n    background: none;\r\n}\r\n\r\n.code-btn::after {\r\n    border: none;\r\n}\r\n</style>","import MiniProgramPage from 'D:/Python/python_doc/xcx/uniapp_front/pages/public/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","APP_CONFIG","uni"],"mappings":";;;;AA0EA,MAAO,iBAAgB,MAAW;AAGlC,MAAK,YAAU;AAAA,EACX,YAAY;AAAA,IACR;AAAA,EACH;AAAA,EAED,QAAQ;AACJ,UAAM,YAAYA,WAAAA;AAClB,WAAO;AAAA,MACH;AAAA,IACJ;AAAA,EACH;AAAA,EAED,OAAO;AACH,WAAO;AAAA,MACH,MAAM;AAAA,QACF,OAAO;AAAA,QACP,UAAU;AAAA,QACV,iBAAiB;AAAA,QACjB,MAAM;AAAA,MACT;AAAA,MACD,WAAW;AAAA,MACX,UAAUC,aAAAA,WAAW,MAAM;AAAA,IAC/B;AAAA,EACH;AAAA,EAED,UAAU;AAAA,IACN,cAAc;AACV,aACI,KAAK,KAAK,SACV,KAAK,KAAK,YACV,KAAK,KAAK,mBACV,KAAK,KAAK,QACV,KAAK,KAAK,aAAa,KAAK,KAAK;AAAA,IAExC;AAAA,IAED,eAAe;AACX,aAAO,KAAK,cAAc,KAAK,KAAK,KAAK;AAAA,IAC5C;AAAA,IAED,gBAAgB;AACZ,aAAO,KAAK,UAAU,mBAAmB;AAAA,IAC7C;AAAA,EACH;AAAA,EAED,SAAS;AAAA,IACL,cAAc,OAAO;AACjB,YAAM,aAAa;AACnB,aAAO,WAAW,KAAK,KAAK;AAAA,IAC/B;AAAA,IAED,MAAM,iBAAiB;AACnB,UAAI,CAAC,KAAK,cAAc;AACpBC,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAC;AACD;AAAA,MACJ;AAEA,UAAI;AACA,cAAM,KAAK,UAAU,qBAAqB,KAAK,KAAK,KAAK;AAEzD,aAAK,YAAY;AACjB,cAAM,QAAQ,YAAY,MAAM;AAC5B,eAAK;AACL,cAAI,KAAK,aAAa,GAAG;AACrB,0BAAc,KAAK;AAAA,UACvB;AAAA,QACH,GAAE,GAAI;AAEPA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAC;AAAA,MACH,SAAO,OAAO;AACZA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,QACV,CAAC;AAAA,MACL;AAAA,IACH;AAAA,IAED,MAAM,iBAAiB;AACnB,UAAI,CAAC,KAAK;AAAa;AAEvB,UAAI,CAAC,KAAK,cAAc;AACpBA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAC;AACD;AAAA,MACJ;AAEA,UAAI;AACA,cAAM,UAAU,MAAM,KAAK,UAAU,SAAS;AAAA,UAC1C,OAAO,KAAK,KAAK;AAAA,UACjB,UAAU,KAAK,KAAK;AAAA,UACpB,MAAM,KAAK,KAAK;AAAA,QACpB,CAAC;AAED,YAAI,SAAS;AACTA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO;AAAA,YACP,MAAM;AAAA,UACV,CAAC;AAED,qBAAW,MAAM;AAEbA,0BAAAA,MAAI,UAAU;AAAA,cACV,KAAK;AAAA,YACT,CAAC;AAAA,UACJ,GAAE,IAAI;AAAA,QACX;AAAA,MACF,SAAO,OAAO;AACZA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,QACV,CAAC;AAAA,MACL;AAAA,IACJ;AAAA,EACJ;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;ACtMA,GAAG,WAAW,eAAe;"}