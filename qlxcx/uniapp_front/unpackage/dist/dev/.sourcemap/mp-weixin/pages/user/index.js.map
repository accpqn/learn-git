{"version":3,"file":"index.js","sources":["pages/user/index.vue","../../../../App/hbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9pbmRleC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- Êú™ÁôªÂΩïÁä∂ÊÄÅ -->\r\n\t\t<view v-if=\"!isLoggedIn\" class=\"login-prompt\">\r\n\t\t\t<view class=\"login-card\">\r\n\t\t\t\t<view class=\"login-icon\">üë§</view>\r\n\t\t\t\t<view class=\"login-title\">Ê¨¢Ëøé‰ΩøÁî®ÊÉÖ‰æ£ÁÇπÈ§ê</view>\r\n\t\t\t\t<view class=\"login-subtitle\">ÁôªÂΩïÂêé‰∫´ÂèóÂÆåÊï¥ÂäüËÉΩ</view>\r\n\t\t\t\t<button class=\"login-btn\" :style=\"getButtonStyle('primary')\" @click=\"goToLogin\">\r\n\t\t\t\t\t<text class=\"btn-text\">Á´ãÂç≥ÁôªÂΩï</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"features-preview\">\r\n\t\t\t\t\t<view class=\"feature-item\">\r\n\t\t\t\t\t\t<text class=\"feature-icon\">üíï</text>\r\n\t\t\t\t\t\t<text class=\"feature-text\">ÊÉÖ‰æ£ÁªëÂÆö</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"feature-item\">\r\n\t\t\t\t\t\t<text class=\"feature-icon\">üçΩÔ∏è</text>\r\n\t\t\t\t\t\t<text class=\"feature-text\">‰∏∫TAÁÇπÈ§ê</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"feature-item\">\r\n\t\t\t\t\t\t<text class=\"feature-icon\">üìù</text>\r\n\t\t\t\t\t\t<text class=\"feature-text\">ËÆ¢ÂçïÁÆ°ÁêÜ</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- Â∑≤ÁôªÂΩïÁä∂ÊÄÅ -->\r\n\t\t<view v-else>\r\n\t\t\t<!-- Â§¥ÈÉ®Áî®Êà∑‰ø°ÊÅØ -->\r\n\t\t\t<view class=\"profile-header\" :style=\"getHeaderStyle()\">\r\n\t\t\t\t<view class=\"user-info\">\r\n\t\t\t\t\t<view class=\"avatar-container\" @click=\"changeAvatar\">\r\n\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\tclass=\"user-avatar\"\r\n\t\t\t\t\t\t\t:src=\"getUserAvatarUrl()\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t\t></image>\r\n\t\t\t\t\t\t<view class=\"avatar-edit-hint\">\r\n\t\t\t\t\t\t\t<text class=\"edit-icon\">üì∑</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"user-details\">\r\n\t\t\t\t\t\t<text class=\"username\">{{ userInfo.username || 'Áî®Êà∑' }}</text>\r\n\t\t\t\t\t\t<text class=\"user-email\">{{ userInfo.email }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"couple-status\">\r\n\t\t\t\t\t<view v-if=\"bindingInfo && bindingInfo.status === 'active'\" class=\"coupled\">\r\n\t\t\t\t\t\t<text class=\"heart-icon\">üíï</text>\r\n\t\t\t\t\t\t<text class=\"status-text\">Â∑≤‰∏é{{ partnerName }}ÁªëÂÆö</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-else class=\"single\">\r\n\t\t\t\t\t\t<text class=\"heart-icon\">üíî</text>\r\n\t\t\t\t\t\t<text class=\"status-text\">Á≠âÂæÖÁªëÂÆö</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- ÁªüËÆ°‰ø°ÊÅØ -->\r\n\t\t\t<view class=\"stats-section\">\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-number\">{{ orderStats.sent }}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">ÂèëÂá∫ËÆ¢Âçï</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-number\">{{ orderStats.received }}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">Êî∂Âà∞ËÆ¢Âçï</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-number\">{{ orderStats.total }}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">ÊÄªËÆ¢ÂçïÊï∞</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- ÂäüËÉΩËèúÂçï -->\r\n\t\t\t<view class=\"menu-section\">\r\n\t\t\t\t<view class=\"menu-group\">\r\n\t\t\t\t\t<text class=\"group-title\">Ë¥¶Êà∑ÁÆ°ÁêÜ</text>\r\n\t\t\t\t\t<view class=\"menu-item\" @click=\"editProfile\">\r\n\t\t\t\t\t\t<text class=\"menu-icon\">üë§</text>\r\n\t\t\t\t\t\t<text class=\"menu-text\">‰∏™‰∫∫‰ø°ÊÅØ</text>\r\n\t\t\t\t\t\t<text class=\"arrow-icon\">‚Ä∫</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"menu-item\" @click=\"handleCoupleAction\">\r\n\t\t\t\t\t\t<text class=\"menu-icon\">üíï</text>\r\n\t\t\t\t\t\t<text class=\"menu-text\">{{ bindingInfo && bindingInfo.status === 'active' ? 'ÊÉÖ‰æ£ÁÆ°ÁêÜ' : 'ÁªëÂÆöÊÉÖ‰æ£' }}</text>\r\n\t\t\t\t\t\t<text class=\"arrow-icon\">‚Ä∫</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"menu-group\">\r\n\t\t\t\t\t<text class=\"group-title\">Â∫îÁî®ËÆæÁΩÆ</text>\r\n\t\t\t\t\t<view class=\"menu-item\" @click=\"navigateToConfig\">\r\n\t\t\t\t\t\t<text class=\"menu-icon\">‚öôÔ∏è</text>\r\n\t\t\t\t\t\t<text class=\"menu-text\">ÂÖ®Â±ÄÈÖçÁΩÆ</text>\r\n\t\t\t\t\t\t<text class=\"arrow-icon\">‚Ä∫</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"menu-group\">\r\n\t\t\t\t\t<text class=\"group-title\">ÂÖ∂‰ªñ</text>\r\n\t\t\t\t\t<view class=\"menu-item\" @click=\"showAbout\">\r\n\t\t\t\t\t\t<text class=\"menu-icon\">‚ÑπÔ∏è</text>\r\n\t\t\t\t\t\t<text class=\"menu-text\">ÂÖ≥‰∫éÊàë‰ª¨</text>\r\n\t\t\t\t\t\t<text class=\"arrow-icon\">‚Ä∫</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"menu-item\" @click=\"clearData\">\r\n\t\t\t\t\t\t<text class=\"menu-icon\">üóëÔ∏è</text>\r\n\t\t\t\t\t\t<text class=\"menu-text\">Ê∏ÖÈô§Êï∞ÊçÆ</text>\r\n\t\t\t\t\t\t<text class=\"arrow-icon\">‚Ä∫</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"logout-section\">\r\n\t\t\t\t<button class=\"logout-btn\" :style=\"getButtonStyle('outline')\" @click=\"handleLogout\">\r\n\t\t\t\t\t<text class=\"logout-text\">ÈÄÄÂá∫ÁôªÂΩï</text>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { useOrderStore } from '@/store/order';\r\nimport { useUserStore } from '@/store/user';\r\nimport { useCoupleStore } from '@/store/couple';\r\nimport { useTheme } from '@/mixins/theme';\r\nimport { onShow } from '@dcloudio/uni-app';\r\nimport { computed, watch, onMounted } from 'vue';\r\n\r\nexport default {\r\n\tsetup() {\r\n\t\tconst orderStore = useOrderStore();\r\n\t\tconst userStore = useUserStore();\r\n\t\tconst coupleStore = useCoupleStore();\r\n\t\tconst { currentTheme, getThemeColor, getButtonStyle, getHeaderStyle } = useTheme();\r\n\r\n\t\t// ËÆ°ÁÆóÂ±ûÊÄß\r\n\t\tconst isLoggedIn = computed(() => userStore.isLoggedIn);\r\n\t\tconst userInfo = computed(() => userStore.userInfo);\r\n\t\tconst bindingInfo = computed(() => coupleStore.bindingInfo);\r\n\r\n\t\tconst partnerName = computed(() => {\r\n\t\t\tif (!bindingInfo.value || bindingInfo.value.status !== 'active') return '';\r\n\t\t\tconst currentUserId = userInfo.value?.id;\r\n\t\t\tif (!currentUserId) return '';\r\n\r\n\t\t\tif (bindingInfo.value.requester.id === currentUserId) {\r\n\t\t\t\treturn bindingInfo.value.receiver.username;\r\n\t\t\t} else {\r\n\t\t\t\treturn bindingInfo.value.requester.username;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// ËÆ¢ÂçïÁªüËÆ°\r\n\t\tconst orderStats = computed(() => {\r\n\t\t\treturn {\r\n\t\t\t\tsent: orderStore.sentOrders.length,\r\n\t\t\t\treceived: orderStore.receivedOrders.length,\r\n\t\t\t\ttotal: orderStore.sentOrders.length + orderStore.receivedOrders.length\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tconsole.log('User page onMounted - isLoggedIn:', userStore.isLoggedIn);\r\n\t\t});\r\n\r\n\t\tonShow(() => {\r\n\t\t\tconsole.log('User page onShow - isLoggedIn:', userStore.isLoggedIn);\r\n\t\t\tconsole.log('User page onShow - userInfo:', userStore.userInfo);\r\n\t\t\tconsole.log('User page onShow - token:', userStore.token);\r\n\r\n\t\t\t// Â¶ÇÊûúÂ∑≤ÁôªÂΩï‰ΩÜÊ≤°ÊúâÂÆåÊï¥Áî®Êà∑‰ø°ÊÅØÔºåÊâçÂà∑Êñ∞\r\n\t\t\tif (userStore.isLoggedIn && (!userStore.userInfo || !userStore.userInfo.id)) {\r\n\t\t\t\tconsole.log('Refreshing user info on page show');\r\n\t\t\t\tuserStore.fetchCurrentUser();\r\n\t\t\t}\r\n\t\t\t// ÂàùÂßãÂåñËÆ¢ÂçïÊï∞ÊçÆ‰ª•Ëé∑ÂèñÁªüËÆ°‰ø°ÊÅØ\r\n\t\t\torderStore.initOrders();\r\n\t\t});\r\n\r\n\t\t// ÁõëÂê¨ÁôªÂΩïÁä∂ÊÄÅÂèòÂåñ\r\n\t\twatch(() => userStore.isLoggedIn, (newVal, oldVal) => {\r\n\t\t\tconsole.log('Login status changed:', oldVal, '->', newVal);\r\n\t\t}, { immediate: true });\r\n\r\n\t\t// Ë∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µÈù¢\r\n\t\tconst goToLogin = () => {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/public/login'\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Ëé∑ÂèñÁî®Êà∑Â§¥ÂÉèURL\r\n\t\tconst getUserAvatarUrl = () => {\r\n\t\t\tif (userInfo.value?.avatar_url) {\r\n\t\t\t\t// Â¶ÇÊûúÊòØÂÆåÊï¥URLÔºåÁõ¥Êé•ËøîÂõû\r\n\t\t\t\tif (userInfo.value.avatar_url.startsWith('http')) {\r\n\t\t\t\t\treturn userInfo.value.avatar_url;\r\n\t\t\t\t}\r\n\t\t\t\t// Â¶ÇÊûúÊòØÁõ∏ÂØπË∑ØÂæÑÔºåÊãºÊé•Âü∫Á°ÄURL\r\n\t\t\t\treturn `${import.meta.env.VITE_API_BASE_URL || 'http://127.0.0.1:8000'}${userInfo.value.avatar_url}`;\r\n\t\t\t}\r\n\t\t\t// ÈªòËÆ§Â§¥ÂÉè\r\n\t\t\treturn '/static/images/default-avatar.png';\r\n\t\t};\r\n\r\n\t\t// Êõ¥Êç¢Â§¥ÂÉè\r\n\t\tconst changeAvatar = () => {\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\tconst tempFilePath = res.tempFilePaths[0];\r\n\t\t\t\t\tconsole.log('ÈÄâÊã©ÁöÑÂ§¥ÂÉèÊñá‰ª∂:', tempFilePath);\r\n\r\n\t\t\t\t\t// ÊòæÁ§∫‰∏ä‰º†‰∏≠ÊèêÁ§∫\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '‰∏ä‰º†‰∏≠...'\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t// Ë∞ÉÁî®Â§¥ÂÉè‰∏ä‰º†API\r\n\t\t\t\t\t\tconst { uploadAvatar } = await import('@/api/user');\r\n\t\t\t\t\t\tconst result = await uploadAvatar(tempFilePath);\r\n\r\n\t\t\t\t\t\tconsole.log('Â§¥ÂÉè‰∏ä‰º†ÊàêÂäü:', result);\r\n\r\n\t\t\t\t\t\t// Êõ¥Êñ∞Êú¨Âú∞Áî®Êà∑‰ø°ÊÅØ\r\n\t\t\t\t\t\tif (result.user) {\r\n\t\t\t\t\t\t\tuserStore.userInfo = result.user;\r\n\t\t\t\t\t\t\tuserStore.saveUserToLocal();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'Â§¥ÂÉèÊõ¥Êñ∞ÊàêÂäü',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.error('Â§¥ÂÉè‰∏ä‰º†Â§±Ë¥•:', error);\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'Â§¥ÂÉè‰∏ä‰º†Â§±Ë¥•: ' + (error.message || 'ÁΩëÁªúÈîôËØØ'),\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (error) => {\r\n\t\t\t\t\tconsole.error('ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•:', error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// ÁºñËæë‰∏™‰∫∫‰ø°ÊÅØ - Ë∑≥ËΩ¨Âà∞‰∏ìÈó®ÁöÑÈ°µÈù¢\r\n\t\tconst editProfile = () => {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/user/profile'\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst handleCoupleAction = () => {\r\n\t\t\tif (bindingInfo.value && bindingInfo.value.status === 'active') {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: 'ÊÉÖ‰æ£ÁÆ°ÁêÜ',\r\n\t\t\t\t\tcontent: `ÊÇ®Â∑≤‰∏é${partnerName.value}ÁªëÂÆöÔºåÊòØÂê¶Ë¶ÅËß£Èô§ÁªëÂÆöÔºü`,\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tconst success = await coupleStore.unbind();\r\n\t\t\t\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: 'Â∑≤Ëß£Èô§ÁªëÂÆö',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'Ëß£ÁªëÂ§±Ë¥•',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: 'ÁªëÂÆöÊÉÖ‰æ£',\r\n\t\t\t\t\tcontent: 'ËØ∑ËæìÂÖ•ÂØπÊñπÁöÑÈÇÆÁÆ±Âú∞ÂùÄ',\r\n\t\t\t\t\teditable: true,\r\n\t\t\t\t\tplaceholderText: 'ËæìÂÖ•ÂØπÊñπÈÇÆÁÆ±',\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tif (res.confirm && res.content) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tconst success = await coupleStore.sendBindingRequest(res.content);\r\n\t\t\t\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: 'ÁªëÂÆöËØ∑Ê±ÇÂ∑≤ÂèëÈÄÅ',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'ÂèëÈÄÅÂ§±Ë¥•',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\r\n\t\tconst navigateToConfig = () => {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/settings/index'\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst showAbout = () => {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: 'ÂÖ≥‰∫éÊàë‰ª¨',\r\n\t\t\t\tcontent: 'ÊÉÖ‰æ£ÁÇπÈ§êÂ∞èÁ®ãÂ∫è v1.0\\n\\n‰∏Ä‰∏™‰∏ì‰∏∫ÊÉÖ‰æ£ËÆæËÆ°ÁöÑÁÇπÈ§êÂ∫îÁî®ÔºåËÆ©Áà±ÊÉÖÊõ¥ÊúâÂë≥ÈÅìÔºÅ',\r\n\t\t\t\tshowCancel: false\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst clearData = () => {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: 'Ê∏ÖÈô§Êï∞ÊçÆ',\r\n\t\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÊú¨Âú∞Êï∞ÊçÆÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t// Ê∏ÖÈô§ÊâÄÊúâÊú¨Âú∞Êï∞ÊçÆ\r\n\t\t\t\t\t\t\torderStore.sentOrders = [];\r\n\t\t\t\t\t\t\torderStore.receivedOrders = [];\r\n\t\t\t\t\t\t\torderStore.saveOrdersToLocal();\r\n\r\n\t\t\t\t\t\t\t// Ê∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®\r\n\t\t\t\t\t\t\tuni.clearStorageSync();\r\n\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: 'Êï∞ÊçÆÂ∑≤Ê∏ÖÈô§',\r\n\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: 'Ê∏ÖÈô§Â§±Ë¥•',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst handleLogout = () => {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: 'ÈÄÄÂá∫ÁôªÂΩï',\r\n\t\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t// Ê∏ÖÈô§Áî®Êà∑ÁôªÂΩïÁä∂ÊÄÅ\r\n\t\t\t\t\t\tuserStore.logout();\r\n\t\t\t\t\t\tcoupleStore.setBindingInfo(null);\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'Â∑≤ÈÄÄÂá∫ÁôªÂΩï',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tisLoggedIn,\r\n\t\t\tuserInfo,\r\n\t\t\tbindingInfo,\r\n\t\t\tpartnerName,\r\n\t\t\torderStats,\r\n\t\t\tgoToLogin,\r\n\t\t\tgetUserAvatarUrl,\r\n\t\t\tchangeAvatar,\r\n\t\t\teditProfile,\r\n\t\t\thandleCoupleAction,\r\n\t\t\tnavigateToConfig,\r\n\t\t\tshowAbout,\r\n\t\t\tclearData,\r\n\t\t\thandleLogout,\r\n\t\t\t// ‰∏ªÈ¢òÁõ∏ÂÖ≥\r\n\t\t\tcurrentTheme,\r\n\t\t\tgetThemeColor,\r\n\t\t\tgetButtonStyle,\r\n\t\t\tgetHeaderStyle\r\n\t\t};\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.container {\r\n\tpadding: 20rpx;\r\n\tbackground: #f8f9fa;\r\n\tmin-height: 100vh;\r\n}\r\n\r\n/* Êú™ÁôªÂΩïÁä∂ÊÄÅÊ†∑Âºè */\r\n.login-prompt {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tmin-height: 80vh;\r\n\tpadding: 40rpx;\r\n}\r\n\r\n.login-card {\r\n\tbackground: white;\r\n\tborder-radius: 40rpx;\r\n\tpadding: 80rpx 60rpx;\r\n\ttext-align: center;\r\n\tbox-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.1);\r\n\twidth: 100%;\r\n\tmax-width: 600rpx;\r\n}\r\n\r\n.login-icon {\r\n\tfont-size: 120rpx;\r\n\tmargin-bottom: 40rpx;\r\n\topacity: 0.8;\r\n}\r\n\r\n.login-title {\r\n\tfont-size: 48rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.login-subtitle {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666;\r\n\tmargin-bottom: 60rpx;\r\n}\r\n\r\n.login-btn {\r\n\twidth: 100%;\r\n\theight: 100rpx;\r\n\tborder: none;\r\n\tborder-radius: 50rpx;\r\n\tcolor: white;\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tmargin-bottom: 60rpx;\r\n\r\n\t.btn-text {\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t&:active {\r\n\t\ttransform: translateY(2rpx);\r\n\t\topacity: 0.8;\r\n\t}\r\n\r\n\t&::after {\r\n\t\tborder: none;\r\n\t}\r\n}\r\n\r\n.features-preview {\r\n\tdisplay: flex;\r\n\tjustify-content: space-around;\r\n\tmargin-top: 40rpx;\r\n}\r\n\r\n.feature-item {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\r\n\t.feature-icon {\r\n\t\tfont-size: 40rpx;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.feature-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n}\r\n\r\n.profile-header {\r\n\tborder-radius: 20rpx;\r\n\tpadding: 40rpx;\r\n\tmargin-bottom: 30rpx;\r\n\tcolor: white;\r\n\tbox-shadow: 0 10rpx 30rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.user-info {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.avatar-container {\r\n\tposition: relative;\r\n\twidth: 120rpx;\r\n\theight: 120rpx;\r\n\r\n\t&:active {\r\n\t\topacity: 0.8;\r\n\t}\r\n}\r\n\r\n.user-avatar {\r\n\twidth: 120rpx;\r\n\theight: 120rpx;\r\n\tborder-radius: 60rpx;\r\n\tborder: 4rpx solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.avatar-edit-hint {\r\n\tposition: absolute;\r\n\tbottom: 0;\r\n\tright: 0;\r\n\twidth: 36rpx;\r\n\theight: 36rpx;\r\n\tbackground: rgba(255, 255, 255, 0.9);\r\n\tborder-radius: 18rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.edit-icon {\r\n\tfont-size: 20rpx;\r\n}\r\n\r\n.user-details {\r\n\tmargin-left: 30rpx;\r\n\tflex: 1;\r\n}\r\n\r\n.username {\r\n\tfont-size: 36rpx;\r\n\tfont-weight: bold;\r\n\tdisplay: block;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.user-email {\r\n\tfont-size: 24rpx;\r\n\topacity: 0.8;\r\n\tdisplay: block;\r\n}\r\n\r\n.couple-status {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tpadding: 20rpx;\r\n\tbackground: rgba(255, 255, 255, 0.2);\r\n\tborder-radius: 15rpx;\r\n}\r\n\r\n.coupled, .single {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.heart-icon {\r\n\tfont-size: 32rpx;\r\n\tmargin-right: 10rpx;\r\n}\r\n\r\n.status-text {\r\n\tfont-size: 28rpx;\r\n}\r\n\r\n.stats-section {\r\n\tbackground: white;\r\n\tborder-radius: 20rpx;\r\n\tpadding: 30rpx;\r\n\tmargin-bottom: 30rpx;\r\n\tdisplay: flex;\r\n\tjustify-content: space-around;\r\n\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.stat-item {\r\n\ttext-align: center;\r\n}\r\n\r\n.stat-number {\r\n\tfont-size: 48rpx;\r\n\tfont-weight: bold;\r\n\tcolor: var(--theme-primary, #FF69B4);\r\n\tdisplay: block;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.stat-label {\r\n\tfont-size: 24rpx;\r\n\tcolor: #909399;\r\n\tdisplay: block;\r\n}\r\n\r\n.menu-section {\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.menu-group {\r\n\tbackground: white;\r\n\tborder-radius: 20rpx;\r\n\tmargin-bottom: 20rpx;\r\n\toverflow: hidden;\r\n\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.group-title {\r\n\tfont-size: 28rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #606266;\r\n\tpadding: 30rpx 30rpx 20rpx;\r\n\tdisplay: block;\r\n}\r\n\r\n.menu-item {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: 30rpx;\r\n\tborder-bottom: 1rpx solid #f0f0f0;\r\n\r\n\t&:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t&:active {\r\n\t\tbackground: #f8f9fa;\r\n\t}\r\n}\r\n\r\n.menu-icon {\r\n\tfont-size: 32rpx;\r\n\twidth: 40rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.menu-text {\r\n\tflex: 1;\r\n\tmargin-left: 20rpx;\r\n\tfont-size: 30rpx;\r\n\tcolor: #303133;\r\n}\r\n\r\n.arrow-icon {\r\n\tfont-size: 32rpx;\r\n\tcolor: #C0C4CC;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.logout-section {\r\n\tpadding: 0 20rpx;\r\n\tmargin-bottom: 40rpx;\r\n}\r\n\r\n.logout-btn {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tborder: none;\r\n\tborder-radius: 40rpx;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: bold;\r\n\r\n\t&::after {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t&:active {\r\n\t\ttransform: translateY(2rpx);\r\n\t\topacity: 0.8;\r\n\t}\r\n}\r\n\r\n.logout-text {\r\n\tdisplay: block;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/Python/python_doc/xcx/uniapp_front/pages/user/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useOrderStore","useUserStore","useCoupleStore","useTheme","computed","onMounted","uni","onShow","watch"],"mappings":"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"}