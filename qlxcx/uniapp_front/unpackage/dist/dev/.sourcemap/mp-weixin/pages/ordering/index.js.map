{"version":3,"file":"index.js","sources":["pages/ordering/index.vue","../../../../App/hbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXJpbmcvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"ordering-container\">\r\n\t\t<!-- 顶部工具栏 -->\r\n\t\t<view class=\"header-toolbar\" :style=\"getHeaderStyle()\">\r\n\t\t\t<view class=\"toolbar-left\">\r\n\t\t\t\t<text class=\"page-title\">为TA点餐</text>\r\n\t\t\t\t<text class=\"page-subtitle\">{{ getGreeting() }}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"toolbar-right\">\r\n\t\t\t\t<view class=\"login-status\">\r\n\t\t\t\t\t<text class=\"status-text\">{{ isLoggedIn ? '真实数据' : '模拟数据' }}</text>\r\n\t\t\t\t\t<text v-if=\"!isLoggedIn\" class=\"login-hint\" @click=\"goToLogin\">点击登录</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"content-wrapper\">\r\n\t\t\t<!-- 左侧分类 -->\r\n\t\t\t<view class=\"sidebar-wrapper\">\r\n\t\t\t\t<scroll-view scroll-y class=\"category-scroll\">\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tv-for=\"(category, index) in menuStore.categories\"\r\n\t\t\t\t\t\t:key=\"category.id\"\r\n\t\t\t\t\t\t:class=\"['category-item', { active: category.id === menuStore.currentCategoryId }]\"\r\n\t\t\t\t\t\t@click=\"handleCategoryChange(category.id)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<text class=\"category-name\">{{ category.name }}</text>\r\n\t\t\t\t\t\t<view v-if=\"getCategoryProductCount(category.id) > 0\" class=\"product-count\">\r\n\t\t\t\t\t\t\t{{ getCategoryProductCount(category.id) }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 右侧商品 -->\r\n\t\t\t<scroll-view scroll-y class=\"product-scroll-view\">\r\n\t\t\t\t<view v-if=\"menuStore.status === 'loading'\" class=\"loading-container\">\r\n\t\t\t\t\t<u-loading-icon text=\"正在加载菜单...\" size=\"24\"></u-loading-icon>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-else-if=\"menuStore.status === 'error'\" class=\"error-container\">\r\n\t\t\t\t\t<u-empty text=\"加载失败\" mode=\"error\">\r\n\t\t\t\t\t\t<template #bottom>\r\n\t\t\t\t\t\t\t<u-button text=\"重新加载\" type=\"primary\" size=\"small\" @click=\"reloadMenu\"></u-button>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</u-empty>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-else class=\"product-list\">\r\n\t\t\t\t\t<view class=\"category-header\">\r\n\t\t\t\t\t\t<text class=\"category-title\">{{ currentCategoryName }}</text>\r\n\t\t\t\t\t\t<text class=\"category-desc\">{{ currentCategoryDesc }}</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view v-if=\"menuStore.currentProducts.length === 0\" class=\"empty-category\">\r\n\t\t\t\t\t\t<u-empty text=\"该分类暂无商品\" mode=\"data\"></u-empty>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view v-else class=\"products-list\">\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tv-for=\"product in menuStore.currentProducts\"\r\n\t\t\t\t\t\t\t:key=\"product.id\"\r\n\t\t\t\t\t\t\tclass=\"product-card\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<view class=\"product-left\" @click=\"showProductDetail(product)\">\r\n\t\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\t\tclass=\"product-image\"\r\n\t\t\t\t\t\t\t\t\t:src=\"getProductImageUrl(product)\"\r\n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"product-right\">\r\n\t\t\t\t\t\t\t\t<view class=\"product-info\" @click=\"showProductDetail(product)\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"product-name\">{{ product.name }}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"product-desc\">{{ product.description }}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"product-price\">¥{{ product.price }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"product-actions\">\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"cartStore.getItemQuantity(product.id) > 0\" class=\"quantity-controls\">\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"quantity-btn minus\" @click=\"decreaseProductQuantity(product)\">-</button>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"quantity-text\">{{ cartStore.getItemQuantity(product.id) }}</text>\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"quantity-btn plus\" @click=\"increaseProductQuantity(product)\">+</button>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<button v-else class=\"add-btn\" @click.stop=\"addProductToCart(product)\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"add-icon\">+</text>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部购物车 -->\r\n\t\t<u-transition :show=\"cartStore.totalItems > 0\" mode=\"slide-up\">\r\n\t\t\t<view class=\"cart-bar\">\r\n\t\t\t\t<view class=\"cart-left\" @click=\"showCartDetail\">\r\n\t\t\t\t\t<view class=\"cart-icon-wrapper\">\r\n\t\t\t\t\t\t<text class=\"cart-icon\">🛒</text>\r\n\t\t\t\t\t\t<view class=\"cart-badge\">{{ cartStore.totalItems }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cart-info\">\r\n\t\t\t\t\t\t<text class=\"cart-text\">{{ cartStore.totalItems }}件商品</text>\r\n\t\t\t\t\t\t<text class=\"total-price\">¥{{ cartStore.totalPrice }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cart-right\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"checkout-btn\"\r\n\t\t\t\t\t\t@click=\"goToConfirm\"\r\n\t\t\t\t\t\t:disabled=\"cartStore.totalItems === 0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t去结算\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-transition>\r\n\r\n\t\t<!-- 商品详情弹窗 -->\r\n\t\t<view v-if=\"showProductModal\" class=\"product-modal-overlay\" @click=\"showProductModal = false\">\r\n\t\t\t<view class=\"product-modal\" v-if=\"selectedProduct\" @click.stop>\r\n\t\t\t\t<view class=\"modal-header\">\r\n\t\t\t\t\t<text class=\"modal-title\">商品详情</text>\r\n\t\t\t\t\t<text class=\"modal-close\" @click=\"showProductModal = false\">×</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"modal-content\">\r\n\t\t\t\t\t<image\r\n\t\t\t\t\t\t:src=\"getProductImageUrl(selectedProduct)\"\r\n\t\t\t\t\t\tclass=\"product-detail-image\"\r\n\t\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t></image>\r\n\t\t\t\t\t<view class=\"product-detail\">\r\n\t\t\t\t\t\t<text class=\"detail-name\">{{ selectedProduct.name }}</text>\r\n\t\t\t\t\t\t<text class=\"detail-desc\">{{ selectedProduct.description }}</text>\r\n\t\t\t\t\t\t<text class=\"detail-price\">¥{{ selectedProduct.price }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"modal-footer\">\r\n\t\t\t\t\t<view class=\"quantity-section\">\r\n\t\t\t\t\t\t<text class=\"quantity-label\">数量：</text>\r\n\t\t\t\t\t\t<view class=\"quantity-controls\">\r\n\t\t\t\t\t\t\t<button class=\"quantity-btn\" @click.stop=\"decreaseQuantity\" :disabled=\"currentQuantity <= 1\">-</button>\r\n\t\t\t\t\t\t\t<text class=\"quantity-display\">{{ currentQuantity }}</text>\r\n\t\t\t\t\t\t\t<button class=\"quantity-btn\" @click.stop=\"increaseQuantity\">+</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"add-to-cart-btn\"\r\n\t\t\t\t\t\t@click.stop=\"addToCart\"\r\n\t\t\t\t\t\t:disabled=\"currentQuantity <= 0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t加入购物车\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { useMenuStore } from '@/store/menu';\r\nimport { useCartStore } from '@/store/cart';\r\nimport { useUserStore } from '@/store/user';\r\nimport { useTheme } from '@/mixins/theme';\r\nimport { onMounted, computed, ref } from 'vue';\r\nimport { onShow } from '@dcloudio/uni-app';\r\nimport { getProductImageUrl as getImageUrl } from '@/config/index';\r\n\r\nexport default {\r\n\tsetup() {\r\n\t\tconst menuStore = useMenuStore();\r\n\t\tconst cartStore = useCartStore();\r\n\t\tconst userStore = useUserStore();\r\n\t\tconst { currentTheme, getThemeColor, getButtonStyle, getHeaderStyle } = useTheme();\r\n\t\tconst showProductModal = ref(false);\r\n\t\tconst selectedProduct = ref(null);\r\n\t\tconst currentQuantity = ref(0);\r\n\r\n\t\t// 登录状态\r\n\t\tconst isLoggedIn = computed(() => userStore.isLoggedIn);\r\n\r\n\t\t// 检查并设置数据源模式\r\n\t\tconst checkAndSetDataMode = () => {\r\n\t\t\tconst wasUsingRealApi = menuStore.useRealApi;\r\n\t\t\tconst shouldUseRealApi = userStore.isLoggedIn;\r\n\r\n\t\t\tif (shouldUseRealApi !== wasUsingRealApi) {\r\n\t\t\t\tconsole.log(`数据源切换: ${wasUsingRealApi ? '真实' : '模拟'} -> ${shouldUseRealApi ? '真实' : '模拟'}`);\r\n\t\t\t\tmenuStore.setApiMode(shouldUseRealApi);\r\n\t\t\t\t// 数据源变化时重新获取数据\r\n\t\t\t\tmenuStore.fetchMenuData();\r\n\t\t\t} else if (shouldUseRealApi) {\r\n\t\t\t\tconsole.log('用户已登录，使用真实API数据');\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('用户未登录，使用模拟数据');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tcheckAndSetDataMode();\r\n\t\t\tcartStore.initCart();\r\n\t\t});\r\n\r\n\t\t// 页面显示时检查登录状态变化\r\n\t\tonShow(() => {\r\n\t\t\tconsole.log('点餐页面显示，检查登录状态');\r\n\t\t\tcheckAndSetDataMode();\r\n\t\t});\r\n\r\n\t\tconst currentCategoryName = computed(() => {\r\n\t\t\treturn menuStore.categories.find(c => c.id === menuStore.currentCategoryId)?.name || '';\r\n\t\t});\r\n\r\n\t\tconst currentCategoryDesc = computed(() => {\r\n\t\t\tconst category = menuStore.categories.find(cat => cat.id === menuStore.currentCategoryId);\r\n\t\t\treturn category ? category.description : '';\r\n\t\t});\r\n\r\n\t\tconst getGreeting = () => {\r\n\t\t\tconst hour = new Date().getHours();\r\n\t\t\tif (hour < 12) return '早餐时光，为TA准备营养早餐吧';\r\n\t\t\tif (hour < 14) return '午餐时间，来点什么好呢？';\r\n\t\t\tif (hour < 18) return '下午茶时光，甜蜜一下';\r\n\t\t\treturn '晚餐时间，和TA一起享受美食';\r\n\t\t};\r\n\r\n\t\tconst getCategoryProductCount = (categoryId) => {\r\n\t\t\treturn menuStore.products[categoryId]?.length || 0;\r\n\t\t};\r\n\r\n\t\tconst handleCategoryChange = (categoryId) => {\r\n\t\t\tmenuStore.setCurrentCategory(categoryId);\r\n\t\t};\r\n\r\n\t\tconst handleQuantityChange = (e, product) => {\r\n\t\t\tcartStore.setItemQuantity(product, e.value);\r\n\t\t};\r\n\r\n\t\tconst showProductDetail = (product) => {\r\n\t\t\tselectedProduct.value = product;\r\n\t\t\t// 初始数量为购物车中的数量，如果没有则为1\r\n\t\t\tconst cartQuantity = cartStore.getItemQuantity(product.id);\r\n\t\t\tcurrentQuantity.value = cartQuantity > 0 ? cartQuantity : 1;\r\n\t\t\tshowProductModal.value = true;\r\n\t\t};\r\n\r\n\t\tconst increaseQuantity = () => {\r\n\t\t\tconsole.log('点击增加按钮，当前商品:', selectedProduct.value);\r\n\t\t\tif (selectedProduct.value) {\r\n\t\t\t\tcurrentQuantity.value++;\r\n\t\t\t\tconsole.log('数量增加到:', currentQuantity.value);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('商品未选择');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst decreaseQuantity = () => {\r\n\t\t\tconsole.log('点击减少按钮，当前数量:', currentQuantity.value);\r\n\t\t\tif (currentQuantity.value > 1) {\r\n\t\t\t\tcurrentQuantity.value--;\r\n\t\t\t\tconsole.log('数量减少到:', currentQuantity.value);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('数量已经是最小值');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst addToCart = () => {\r\n\t\t\tif (selectedProduct.value && currentQuantity.value > 0) {\r\n\t\t\t\tconsole.log('加入购物车:', selectedProduct.value, currentQuantity.value);\r\n\t\t\t\t// 设置购物车中的数量\r\n\t\t\t\tcartStore.setItemQuantity(selectedProduct.value, currentQuantity.value);\r\n\t\t\t\tshowProductModal.value = false;\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: `已加入购物车`,\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// 商品列表中的快速添加到购物车\r\n\t\tconst addProductToCart = (product) => {\r\n\t\t\tconsole.log('=== 点击加号按钮 ===');\r\n\t\t\tconsole.log('商品信息:', product);\r\n\t\t\tconsole.log('商品ID:', product?.id);\r\n\t\t\tconsole.log('商品名称:', product?.name);\r\n\r\n\t\t\tif (product) {\r\n\t\t\t\tconsole.log('添加到购物车');\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcartStore.setItemQuantity(product, 1);\r\n\t\t\t\t\tconsole.log('购物车操作完成');\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '已加入购物车',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('购物车操作失败:', error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '添加失败',\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('商品信息无效');\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '商品信息无效',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// 商品列表中的增加数量\r\n\t\tconst increaseProductQuantity = (product) => {\r\n\t\t\tconst currentQty = cartStore.getItemQuantity(product.id);\r\n\t\t\tcartStore.setItemQuantity(product, currentQty + 1);\r\n\t\t};\r\n\r\n\t\t// 商品列表中的减少数量\r\n\t\tconst decreaseProductQuantity = (product) => {\r\n\t\t\tconst currentQty = cartStore.getItemQuantity(product.id);\r\n\t\t\tif (currentQty > 1) {\r\n\t\t\t\tcartStore.setItemQuantity(product, currentQty - 1);\r\n\t\t\t} else if (currentQty === 1) {\r\n\t\t\t\tcartStore.setItemQuantity(product, 0);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst showCartDetail = () => {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `购物车中有${cartStore.totalItems}件商品`,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst goToConfirm = () => {\r\n\t\t\tif (cartStore.totalItems === 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请先选择商品',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/order/confirm'\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst goToLogin = () => {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/public/login'\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst reloadMenu = () => {\r\n\t\t\tmenuStore.fetchMenuData();\r\n\t\t};\r\n\r\n\r\n\r\n\t\t// 使用配置文件中的图片URL处理方法\r\n\t\tconst getProductImageUrl = getImageUrl;\r\n\r\n\t\treturn {\r\n\t\t\tmenuStore,\r\n\t\t\tcartStore,\r\n\t\t\tisLoggedIn,\r\n\t\t\tshowProductModal,\r\n\t\t\tselectedProduct,\r\n\t\t\tcurrentQuantity,\r\n\t\t\tcurrentCategoryName,\r\n\t\t\tcurrentCategoryDesc,\r\n\t\t\tgetGreeting,\r\n\t\t\tgetCategoryProductCount,\r\n\t\t\thandleCategoryChange,\r\n\t\t\thandleQuantityChange,\r\n\t\t\tshowProductDetail,\r\n\t\t\tincreaseQuantity,\r\n\t\t\tdecreaseQuantity,\r\n\t\t\taddToCart,\r\n\t\t\taddProductToCart,\r\n\t\t\tincreaseProductQuantity,\r\n\t\t\tdecreaseProductQuantity,\r\n\t\t\tshowCartDetail,\r\n\t\t\tgoToConfirm,\r\n\t\t\tgoToLogin,\r\n\t\t\treloadMenu,\r\n\t\t\tgetProductImageUrl,\r\n\t\t\t// 主题相关\r\n\t\t\tcurrentTheme,\r\n\t\t\tgetThemeColor,\r\n\t\t\tgetButtonStyle,\r\n\t\t\tgetHeaderStyle\r\n\t\t};\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.ordering-container {\r\n\theight: 100vh;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tbackground: #f8f9fa;\r\n}\r\n\r\n.header-toolbar {\r\n\tpadding: 20rpx 30rpx;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tcolor: white;\r\n}\r\n\r\n.toolbar-left {\r\n\tflex: 1;\r\n}\r\n\r\n.page-title {\r\n\tfont-size: 36rpx;\r\n\tfont-weight: bold;\r\n\tdisplay: block;\r\n\tmargin-bottom: 8rpx;\r\n}\r\n\r\n.page-subtitle {\r\n\tfont-size: 24rpx;\r\n\topacity: 0.9;\r\n\tdisplay: block;\r\n}\r\n\r\n.toolbar-right {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.login-status {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: flex-end;\r\n}\r\n\r\n.status-text {\r\n\tfont-size: 22rpx;\r\n\topacity: 0.9;\r\n}\r\n\r\n.login-hint {\r\n\tfont-size: 20rpx;\r\n\topacity: 0.8;\r\n\tmargin-top: 4rpx;\r\n\tpadding: 4rpx 8rpx;\r\n\tbackground: rgba(255, 255, 255, 0.2);\r\n\tborder-radius: 10rpx;\r\n\r\n\t&:active {\r\n\t\topacity: 1;\r\n\t\tbackground: rgba(255, 255, 255, 0.3);\r\n\t}\r\n}\r\n\r\n.content-wrapper {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\toverflow: hidden;\r\n}\r\n\r\n.sidebar-wrapper {\r\n\twidth: 200rpx;\r\n\tbackground: white;\r\n\tborder-right: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.category-scroll {\r\n\theight: 100%;\r\n}\r\n\r\n.category-item {\r\n\tposition: relative;\r\n\tpadding: 30rpx 20rpx;\r\n\tborder-bottom: 1rpx solid #f8f9fa;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\r\n\t&.active {\r\n\t\tbackground: #fff5f5;\r\n\t\tborder-right: 4rpx solid var(--theme-primary, #FF69B4);\r\n\r\n\t\t.category-name {\r\n\t\t\tcolor: var(--theme-primary, #FF69B4);\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\t}\r\n\r\n\t&:active {\r\n\t\tbackground: #f8f9fa;\r\n\t}\r\n}\r\n\r\n.category-name {\r\n\tfont-size: 26rpx;\r\n\tcolor: #303133;\r\n\ttext-align: center;\r\n\tline-height: 1.4;\r\n\tmargin-bottom: 8rpx;\r\n}\r\n\r\n.product-count {\r\n\tbackground: var(--theme-primary, #FF69B4);\r\n\tcolor: white;\r\n\tfont-size: 20rpx;\r\n\tpadding: 4rpx 8rpx;\r\n\tborder-radius: 10rpx;\r\n\tmin-width: 32rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.product-scroll-view {\r\n\tflex: 1;\r\n\theight: 100%;\r\n\tbackground: white;\r\n}\r\n\r\n.loading-container, .error-container {\r\n\tpadding: 100rpx 0;\r\n\ttext-align: center;\r\n}\r\n\r\n.product-list {\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.category-header {\r\n\tmargin-bottom: 30rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.category-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #303133;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.category-desc {\r\n\tfont-size: 24rpx;\r\n\tcolor: #909399;\r\n}\r\n\r\n.empty-category {\r\n\tpadding: 100rpx 0;\r\n}\r\n\r\n.products-list {\r\n\tpadding: 0 20rpx;\r\n}\r\n\r\n.product-card {\r\n\tdisplay: flex;\r\n\tbackground: white;\r\n\tborder-radius: 20rpx;\r\n\tmargin-bottom: 20rpx;\r\n\tpadding: 20rpx;\r\n\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.08);\r\n\r\n\t&:last-child {\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n}\r\n\r\n.product-left {\r\n\tposition: relative;\r\n\twidth: 160rpx;\r\n\theight: 160rpx;\r\n\tmargin-right: 20rpx;\r\n\tborder-radius: 15rpx;\r\n\toverflow: hidden;\r\n}\r\n\r\n.product-image {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tborder-radius: 15rpx;\r\n}\r\n\r\n.product-right {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-between;\r\n}\r\n\r\n.unavailable-mask {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground: rgba(0, 0, 0, 0.6);\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tborder-radius: 20rpx 20rpx 0 0;\r\n}\r\n\r\n.unavailable-text {\r\n\tcolor: white;\r\n\tfont-size: 24rpx;\r\n}\r\n\r\n.product-info {\r\n\tflex: 1;\r\n}\r\n\r\n.product-name {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #303133;\r\n\tmargin-bottom: 10rpx;\r\n\tdisplay: -webkit-box;\r\n\t-webkit-line-clamp: 1;\r\n\t-webkit-box-orient: vertical;\r\n\toverflow: hidden;\r\n}\r\n\r\n.product-desc {\r\n\tfont-size: 22rpx;\r\n\tcolor: #909399;\r\n\tmargin-bottom: 15rpx;\r\n\tdisplay: -webkit-box;\r\n\t-webkit-line-clamp: 2;\r\n\t-webkit-box-orient: vertical;\r\n\toverflow: hidden;\r\n\tline-height: 1.4;\r\n}\r\n\r\n.product-price {\r\n\tfont-size: 36rpx;\r\n\tcolor: var(--theme-primary, #FF69B4);\r\n\tfont-weight: bold;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.product-actions {\r\n\tdisplay: flex;\r\n\tjustify-content: flex-end;\r\n\talign-items: center;\r\n}\r\n\r\n.add-btn {\r\n\twidth: 60rpx;\r\n\theight: 60rpx;\r\n\tbackground: linear-gradient(135deg, var(--theme-primary, #FF69B4), var(--theme-secondary, #FF1493));\r\n\tborder: none;\r\n\tborder-radius: 30rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tbox-shadow: 0 4rpx 15rpx rgba(255, 105, 180, 0.3);\r\n\tposition: relative;\r\n\tz-index: 1;\r\n\r\n\t&::after {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t&:disabled {\r\n\t\tbackground: #CCC;\r\n\t\tbox-shadow: none;\r\n\t}\r\n\r\n\t&:not(:disabled):active {\r\n\t\ttransform: scale(0.95);\r\n\t}\r\n}\r\n\r\n.add-icon {\r\n\tfont-size: 32rpx;\r\n\tcolor: white;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.quantity-text {\r\n\tfont-size: 28rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n\tmin-width: 40rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.minus {\r\n\tborder-color: var(--theme-primary, #FF69B4) !important;\r\n\tcolor: var(--theme-primary, #FF69B4) !important;\r\n}\r\n\r\n.plus {\r\n\tbackground: linear-gradient(135deg, var(--theme-primary, #FF69B4), var(--theme-secondary, #FF1493)) !important;\r\n\tcolor: white !important;\r\n\tborder: none !important;\r\n}\r\n\r\n.cart-bar {\r\n\theight: 120rpx;\r\n\tbackground: white;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: 0 30rpx;\r\n\tbox-shadow: 0 -2rpx 10rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.cart-left {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.cart-icon-wrapper {\r\n\tposition: relative;\r\n\twidth: 60rpx;\r\n\theight: 60rpx;\r\n\tbackground: var(--theme-primary, #FF69B4);\r\n\tborder-radius: 50%;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tmargin-right: 20rpx;\r\n}\r\n\r\n.cart-icon {\r\n\tfont-size: 24rpx;\r\n\tcolor: white;\r\n}\r\n\r\n.cart-badge {\r\n\tposition: absolute;\r\n\ttop: -8rpx;\r\n\tright: -8rpx;\r\n\tbackground: var(--theme-secondary, #FF1493);\r\n\tcolor: white;\r\n\tfont-size: 20rpx;\r\n\tpadding: 4rpx 8rpx;\r\n\tborder-radius: 20rpx;\r\n\tmin-width: 32rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.cart-info {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n\r\n.cart-text {\r\n\tfont-size: 24rpx;\r\n\tcolor: #909399;\r\n\tmargin-bottom: 4rpx;\r\n}\r\n\r\n.total-price {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #FF69B4;\r\n}\r\n\r\n.cart-right {\r\n\tmargin-left: 20rpx;\r\n}\r\n\r\n.checkout-btn {\r\n\tbackground: linear-gradient(135deg, #FF69B4, #FF1493);\r\n\tcolor: white;\r\n\tborder: none;\r\n\tborder-radius: 50rpx;\r\n\tpadding: 20rpx 40rpx;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 4rpx 15rpx rgba(255, 105, 180, 0.3);\r\n\r\n\t&::after {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t&:disabled {\r\n\t\tbackground: #CCC;\r\n\t\tbox-shadow: none;\r\n\t}\r\n\r\n\t&:not(:disabled):active {\r\n\t\ttransform: translateY(2rpx);\r\n\t}\r\n}\r\n\r\n/* 商品详情弹窗样式 */\r\n.product-modal-overlay {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground: rgba(0, 0, 0, 0.5);\r\n\tdisplay: flex;\r\n\talign-items: flex-end;\r\n\tjustify-content: center;\r\n\tz-index: 2000;\r\n}\r\n\r\n.product-modal {\r\n\tbackground: white;\r\n\tborder-radius: 20rpx 20rpx 0 0;\r\n\twidth: 100%;\r\n\tmax-height: 80vh;\r\n\toverflow-y: auto;\r\n\tanimation: slideUp 0.3s ease-out;\r\n}\r\n\r\n@keyframes slideUp {\r\n\tfrom {\r\n\t\ttransform: translateY(100%);\r\n\t}\r\n\tto {\r\n\t\ttransform: translateY(0);\r\n\t}\r\n}\r\n\r\n.modal-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 30rpx;\r\n\tborder-bottom: 1rpx solid #F0F0F0;\r\n}\r\n\r\n.modal-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #303133;\r\n}\r\n\r\n.modal-close {\r\n\tfont-size: 40rpx;\r\n\tcolor: #999;\r\n\tcursor: pointer;\r\n\twidth: 60rpx;\r\n\theight: 60rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.modal-content {\r\n\tpadding: 30rpx;\r\n}\r\n\r\n.product-detail-image {\r\n\twidth: 100%;\r\n\theight: 400rpx;\r\n\tborder-radius: 15rpx;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.product-detail {\r\n\tpadding: 20rpx 0;\r\n}\r\n\r\n.detail-name {\r\n\tfont-size: 36rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #303133;\r\n\tmargin-bottom: 15rpx;\r\n\tdisplay: block;\r\n}\r\n\r\n.detail-desc {\r\n\tfont-size: 28rpx;\r\n\tcolor: #606266;\r\n\tmargin-bottom: 20rpx;\r\n\tdisplay: block;\r\n\tline-height: 1.6;\r\n}\r\n\r\n.detail-price {\r\n\tfont-size: 40rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #FF69B4;\r\n\tdisplay: block;\r\n}\r\n\r\n.modal-footer {\r\n\tpadding: 30rpx;\r\n\tborder-top: 1rpx solid #F0F0F0;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tgap: 30rpx;\r\n}\r\n\r\n.quantity-section {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 20rpx;\r\n}\r\n\r\n.quantity-label {\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n}\r\n\r\n.quantity-controls {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 15rpx;\r\n}\r\n\r\n.quantity-btn {\r\n\twidth: 60rpx;\r\n\theight: 60rpx;\r\n\tborder: 1rpx solid #E0E0E0;\r\n\tborder-radius: 30rpx;\r\n\tbackground: white;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tfont-size: 32rpx;\r\n\tcolor: #333;\r\n\tposition: relative;\r\n\tz-index: 1;\r\n\r\n\t&::after {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t&:disabled {\r\n\t\tbackground: #F5F5F5;\r\n\t\tcolor: #CCC;\r\n\t}\r\n\r\n\t&:not(:disabled):active {\r\n\t\tbackground: #F0F0F0;\r\n\t}\r\n}\r\n\r\n.quantity-display {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n\tmin-width: 60rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.add-to-cart-btn {\r\n\tflex: 1;\r\n\theight: 80rpx;\r\n\tbackground: linear-gradient(135deg, #FF69B4, #FF1493);\r\n\tcolor: white;\r\n\tborder: none;\r\n\tborder-radius: 40rpx;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: bold;\r\n\tposition: relative;\r\n\tz-index: 1;\r\n\r\n\t&::after {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t&:disabled {\r\n\t\tbackground: #CCC;\r\n\t}\r\n\r\n\t&:not(:disabled):active {\r\n\t\ttransform: translateY(2rpx);\r\n\t}\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/Python/python_doc/xcx/uniapp_front/pages/ordering/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useMenuStore","useCartStore","useUserStore","useTheme","ref","computed","uni","onMounted","onShow","getImageUrl"],"mappings":"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"}