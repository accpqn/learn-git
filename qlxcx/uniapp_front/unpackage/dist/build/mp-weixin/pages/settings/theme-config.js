"use strict";const o=require("../../common/vendor.js"),e=require("../../api/theme.js"),r={name:"ThemeConfig",setup(){const r=o.ref(!1),n=o.reactive({primaryColor:"#FF69B4",secondaryColor:"#FF1493",backgroundColor:"#F8F9FA"});o.onMounted((()=>{a()}));const a=async()=>{try{const o=e.loadThemeFromStorage();Object.assign(n,o);const r=await e.getThemeConfig();r&&(Object.assign(n,r),e.applyTheme(n))}catch(o){console.error("加载主题配置失败:",o),Object.assign(n,e.presetThemes[0])}};return{saving:r,themeConfig:n,presetThemes:e.presetThemes,goBack:()=>{o.index.navigateBack()},showColorPicker:e=>{o.index.showModal({title:"输入颜色值",content:"请输入十六进制颜色值（如：#FF69B4）",editable:!0,placeholderText:n[e+"Color"],success:r=>{if(r.confirm&&r.content){const a=r.content.trim();/^#[0-9A-Fa-f]{6}$/.test(a)?n[e+"Color"]=a:o.index.showToast({title:"颜色格式错误",icon:"error"})}}})},isCurrentTheme:o=>o.primaryColor===n.primaryColor&&o.secondaryColor===n.secondaryColor&&o.backgroundColor===n.backgroundColor,applyPresetTheme:r=>{n.primaryColor=r.primaryColor,n.secondaryColor=r.secondaryColor,n.backgroundColor=r.backgroundColor,e.applyTheme(n),o.index.showToast({title:`已应用${r.name}主题`,icon:"success"})},saveThemeConfig:async()=>{r.value=!0;try{await e.saveThemeConfig(n),e.applyTheme(n),o.index.showToast({title:"主题保存成功",icon:"success"})}catch(a){console.error("保存主题失败:",a),e.applyTheme(n),o.index.showToast({title:"主题已保存到本地",icon:"success"})}finally{r.value=!1}}}}};const n=o._export_sfc(r,[["render",function(e,r,n,a,s,t){return{a:o.o(((...o)=>a.goBack&&a.goBack(...o))),b:a.themeConfig.primaryColor,c:a.themeConfig.secondaryColor,d:a.themeConfig.backgroundColor,e:a.themeConfig.primaryColor,f:o.t(a.themeConfig.primaryColor),g:o.o((o=>a.showColorPicker("primary"))),h:a.themeConfig.secondaryColor,i:o.t(a.themeConfig.secondaryColor),j:o.o((o=>a.showColorPicker("secondary"))),k:a.themeConfig.backgroundColor,l:o.t(a.themeConfig.backgroundColor),m:o.o((o=>a.showColorPicker("background"))),n:o.f(a.presetThemes,((e,r,n)=>({a:e.primaryColor,b:e.secondaryColor,c:e.backgroundColor,d:o.t(e.name),e:r,f:a.isCurrentTheme(e)?1:"",g:o.o((o=>a.applyPresetTheme(e)),r)}))),o:o.o(((...o)=>a.saveThemeConfig&&a.saveThemeConfig(...o))),p:a.saving}}],["__scopeId","data-v-e427afe9"]]);wx.createPage(n);
